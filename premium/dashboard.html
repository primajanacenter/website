<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Primajana Tools ‚Äì Dashboard Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#0d6efd;
  --success:#16a34a;
  --danger:#dc2626;
  --bg:#f4f6fb;
}
*{box-sizing:border-box;}
body{margin:0;background:var(--bg);font-family:system-ui;}

.topbar{
  position:fixed;top:0;left:0;right:0;height:64px;
  background:#fff;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 28px;
  box-shadow:0 2px 10px rgba(0,0,0,.06);
  z-index:99;
}
.brand{font-weight:700;font-size:1.1rem;color:#1f2937;}
.user-area{display:flex;align-items:center;gap:12px;font-size:.85rem;}
.badge{padding:5px 12px;border-radius:999px;font-weight:600;font-size:.75rem;}
.active{background:#dcfce7;color:var(--success);}
.inactive{background:#fee2e2;color:var(--danger);}
.btn{background:var(--primary);border:none;color:#fff;padding:7px 16px;border-radius:8px;cursor:pointer;font-weight:600;font-size:.8rem;}

.main{max-width:1200px;margin:100px auto 40px;padding:0 24px;}
.menu-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:22px;}
.tool-card{
  background:#fff;border-radius:16px;padding:26px 20px;text-align:center;
  box-shadow:0 8px 22px rgba(0,0,0,.05);cursor:pointer;transition:.25s;
}
.tool-card:hover{transform:translateY(-6px);box-shadow:0 16px 36px rgba(0,0,0,.1);}
.tool-icon{font-size:2.5rem;color:var(--primary);margin-bottom:10px;}
.tool-title{font-weight:700;margin-bottom:6px;color:#1f2937;}
.tool-desc{font-size:.85rem;color:#6b7280;}
</style>
</head>
<body>

<div class="topbar">
  <div class="brand">Primajana Premium Tools</div>
  <div class="user-area">
    <span id="expiredInfo"></span>
    <span id="substatus" class="badge inactive">MEMUAT‚Ä¶</span>
    <button id="payBtn" class="btn" style="display:none" onclick="subscribe()">Berlangganan</button>
    <button class="btn" onclick="logout()">Logout</button>
  </div>
</div>

<div class="main">
  <div class="menu-grid">
    <div class="tool-card" onclick="go('sampel.html')">
      <div class="tool-icon">üìê</div>
      <div class="tool-title">Besar Sampel</div>
      <div class="tool-desc">Hitung proporsi, rerata & korelasi</div>
    </div>
    <div class="tool-card" onclick="go('deskriptif.html')">
      <div class="tool-icon">üìä</div>
      <div class="tool-title">Statistik Deskriptif</div>
      <div class="tool-desc">Rata-rata, median, histogram</div>
    </div>
    <div class="tool-card" onclick="go('inferensial.html')">
      <div class="tool-icon">üìà</div>
      <div class="tool-title">Uji Perbedaan</div>
      <div class="tool-desc">t-test, ANOVA, Chi-Square</div>
    </div>
    <div class="tool-card" onclick="go('korelasi.html')">
      <div class="tool-icon">üîó</div>
      <div class="tool-title">Uji Hubungan</div>
      <div class="tool-desc">Pearson & Spearman</div>
    </div>
    <div class="tool-card" onclick="go('multivariat.html')">
      <div class="tool-icon">üß©</div>
      <div class="tool-title">Multivariat</div>
      <div class="tool-desc">Regresi ganda & logistik</div>
    </div>
    <div class="tool-card" onclick="go('diagnostik.html')">
      <div class="tool-icon">ü©∫</div>
      <div class="tool-title">Diagnostik Model</div>
      <div class="tool-desc">ROC & validasi</div>
    </div>
    <div class="tool-card" onclick="go('pemetaan.html')">
      <div class="tool-icon">üó∫</div>
      <div class="tool-title">Pemetaan</div>
      <div class="tool-desc">Dotmap & Heatmap</div>
    </div>
  </div>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const SUPABASE_URL = "https://jzrqalbhvjkgradpnbcp.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp6cnFhbGJodmprZ3JhZHBuYmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc2NzQ2NTksImV4cCI6MjA4MzI1MDY1OX0.yOGN7e7Bu6Yvm1gDaF1URHF7Mjcj7aVHfJ5URHRWyaE";
const MAYAR_LINK = "https://primajana.myr.id/membership/primajana-tools-membership-bulanan";

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

window.go = u => location.href = u;
window.logout = async()=>{
  await supabase.auth.signOut();
  location.href="login.html";
}
window.subscribe = ()=> location.href = MAYAR_LINK;

const { data:{ session } } = await supabase.auth.getSession();
if(!session) location.href="login.html";

const { data } = await supabase.from("subscriptions").select("*").single();

if(data && data.active){
  substatus.innerText = "AKTIF";
  substatus.className = "badge active";
  const exp = new Date(data.expired_at);
  expiredInfo.innerHTML = `Aktif sampai <b>${exp.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"})}</b>`;
}else{
  substatus.innerText = "TIDAK AKTIF";
  substatus.className = "badge inactive";
  expiredInfo.innerText = "";
  payBtn.style.display="inline-block";
}
</script>

</body>
</html>
