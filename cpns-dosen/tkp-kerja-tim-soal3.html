<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Soal TWK CPNS ‚Äì Pancasila</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: #f4f6f9;
  color: #1f2937;
}

header {
  background: linear-gradient(135deg, #1e3a8a, #2563eb);
  color: white;
  padding: 35px 20px;
  text-align: center;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 30px 20px;
}

.card {
  background: white;
  border-radius: 14px;
  padding: 30px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.progress {
  margin-bottom: 20px;
  font-weight: 600;
}

.question {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.options button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  cursor: pointer;
  transition: all 0.2s ease;
}

.options button:hover {
  background: #eef2ff;
}

.options button.correct {
  background: #dcfce7;
  border-color: #22c55e;
  font-weight: 600;
}

.options button.wrong {
  background: #fee2e2;
  border-color: #ef4444;
}

.explanation {
  margin-top: 20px;
  padding: 15px;
  background: #fef3c7;
  border-left: 5px solid #f59e0b;
  border-radius: 8px;
  display: none;
}

.controls {
  margin-top: 25px;
  text-align: right;
}

.controls button {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  background: #2563eb;
  color: white;
}

.result {
  text-align: center;
  display: none;
}

.result h2 {
  margin-bottom: 10px;
}

.timer {
  font-weight: 700;
  font-size: 16px;
  color: #dc2626;
  margin-bottom: 15px;
}

#gamification {
  margin-top: 10px;
  font-weight: 600;
  animation: pop 0.6s ease;
}

@keyframes pop {
  0% { transform: scale(0.8); }
  100% { transform: scale(1); }
}

/* ===============================
   üìä RESULT DASHBOARD
================================ */
.result {
  display: none;
}

.result-title {
  text-align: center;
  margin-bottom: 25px;
  color: #1e40af;
}

.result-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px;
  margin-bottom: 30px;
}

.summary-box {
  background: #f8fafc;
  border-radius: 12px;
  padding: 18px;
  text-align: center;
  box-shadow: inset 0 0 0 1px #e5e7eb;
}

.summary-box .label {
  display: block;
  font-size: 14px;
  color: #64748b;
  margin-bottom: 6px;
}

.summary-box .value {
  font-size: 22px;
  font-weight: 700;
  color: #0f172a;
}

.result-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
}

.result-section h3 {
  margin-bottom: 12px;
  color: #334155;
}

.result-section ul {
  padding-left: 18px;
}

.result-section li {
  margin-bottom: 8px;
  line-height: 1.6;
}

.result-actions {
  margin-top: 30px;
  text-align: center;
}

.result-actions button {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.result-actions button:hover {
  opacity: 0.9;
}


</style>
</head>

<body>

<header>
  <h1>Latihan Soal TKP CPNS</h1>
  <p>Kerja Tim ¬∑ Standar CPNS</p>
<div id="gamification">
  ‚≠ê KP: <span id="kp">0</span> |
  üéñÔ∏è Level: <span id="level">1</span>
</div>

</header>

<div class="container">
  <div class="card" id="quiz">
    <div class="timer" id="timer">
  ‚è±Ô∏è Sisa Waktu: <span id="time">20:00</span>
</div>

    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div class="explanation" id="explanation"></div>

    <div class="controls">
      <button onclick="nextQuestion()">Soal Berikutnya</button>
    </div>
  </div>

<div class="card result" id="result">

  <h2 class="result-title">üìä Hasil Evaluasi Latihan TKP</h2>

  <!-- RINGKASAN NILAI -->
  <div class="result-summary">
    <div class="summary-box">
      <span class="label">Skor</span>
      <span class="value" id="finalScore">‚Äì</span>
    </div>
    <div class="summary-box">
      <span class="label">Knowledge Point</span>
      <span class="value" id="finalKP">‚Äì</span>
    </div>
    <div class="summary-box">
      <span class="label">Level</span>
      <span class="value" id="finalLevel">‚Äì</span>
    </div>
  </div>

  <!-- ANALITIK -->
  <div class="result-section">
    <h3>üìå Analisis Area TKP</h3>
    <div id="scoreText"></div>
  </div>

  <!-- CTA -->
  <div class="result-actions">
    <button onclick="location.reload()">üîÅ Ulangi Latihan</button>
  </div>

</div>


<script>
/* ===============================
   ‚è±Ô∏è TIMER BKN
================================ */
let totalTime = 20 * 60;
let timerInterval;
let startTime = null;

function startTimer() {
  if (timerInterval) return;

  timerInterval = setInterval(() => {
    totalTime--;

    const min = Math.floor(totalTime / 60);
    const sec = totalTime % 60;
    document.getElementById("time").innerText =
      `${min}:${sec.toString().padStart(2, "0")}`;

    if (totalTime <= 0) {
      clearInterval(timerInterval);
      finishExam();
    }
  }, 1000);
}

/* ===============================
   üìò BANK SOAL (20 SOAL FIX)
================================ */
const questions = [
  /* === ISI BANK SOAL 1‚Äì20 (TETAP SEPERTI SEBELUMNYA) === */
  
/* =================================================
   üìò BANK SOAL TKP ‚Äì EXTREME HOTS (NARATIF)
   KERJA TIM, KOMUNIKASI & KEPUTUSAN STRATEGIS ASN
   (20 SOAL CERITA)
================================================= */

/* ===== LEVEL EXTREME HOTS (41‚Äì60)
   STUDI KASUS, DILEMA, & KONSEKUENSI
================================ */

{
  q: "Anda tergabung dalam tim lintas unit yang menangani layanan darurat masyarakat. Salah satu unit terlambat merespons karena miskomunikasi internal, dan publik mulai menyalahkan tim Anda. Sikap paling tepat adalah ‚Ä¶",
  o: [
    "Menyalahkan unit tersebut agar citra tim Anda tetap baik",
    "Menjelaskan kesalahan unit lain kepada publik",
    "Fokus memperbaiki layanan sambil melakukan evaluasi internal",
    "Menunggu perintah pimpinan sebelum bertindak",
    "Menghindari komunikasi dengan publik"
  ],
  a: 2,
  e: "Fokus utama ASN adalah pemulihan layanan dan perbaikan sistem, bukan saling menyalahkan.",
  c: "Manajemen Krisis Tim"
},
{
  q: "Dalam rapat tim strategis, Anda mengetahui keputusan yang diambil berpotensi merugikan kelompok tertentu, namun mayoritas tim ingin segera mengeksekusi. Apa langkah paling profesional?",
  o: [
    "Diam karena suara Anda minoritas",
    "Menolak keputusan secara terbuka",
    "Menyampaikan analisis dampak secara data-driven sebelum finalisasi",
    "Mengikuti keputusan tanpa catatan",
    "Menyampaikan kritik di luar forum resmi"
  ],
  a: 2,
  e: "HOTS TKP menilai keberanian menyampaikan analisis risiko secara etis dan tepat waktu.",
  c: "Loyalitas Kritis"
},
{
  q: "Seorang rekan satu tim sering mengambil kredit atas keberhasilan tim di hadapan pimpinan. Sikap Anda yang paling mencerminkan kerja tim matang adalah ‚Ä¶",
  o: [
    "Menegurnya di depan pimpinan",
    "Membalas dengan melakukan hal yang sama",
    "Menjaga profesionalisme dan menguatkan mekanisme evaluasi tim",
    "Menghindari bekerja dengannya",
    "Melaporkannya tanpa klarifikasi"
  ],
  a: 2,
  e: "Pendekatan sistemik lebih efektif daripada reaksi emosional.",
  c: "Etika Kerja Tim"
},
{
  q: "Dalam tim proyek nasional, terjadi perbedaan tajam antara pendekatan cepat dan pendekatan partisipatif yang lebih lambat. Tenggat waktu ketat. Sikap paling tepat adalah ‚Ä¶",
  o: [
    "Mengambil pendekatan tercepat tanpa kompromi",
    "Menunda proyek sampai semua sepakat",
    "Mencari solusi kompromi yang menjaga kualitas dan partisipasi",
    "Menyerahkan keputusan sepenuhnya ke pimpinan",
    "Mengikuti kelompok yang dominan"
  ],
  a: 2,
  e: "ASN dinilai dari kemampuannya menyeimbangkan efektivitas dan kualitas kebijakan.",
  c: "Pengambilan Keputusan Strategis"
},
{
  q: "Dalam sebuah tim, Anda menemukan bahwa pembagian peran tidak sesuai kompetensi dan berdampak pada hasil kerja. Namun kondisi ini sudah berjalan lama. Apa sikap terbaik?",
  o: [
    "Menerima kondisi karena sudah terbiasa",
    "Mengambil alih tugas tanpa koordinasi",
    "Mengusulkan evaluasi peran berbasis kompetensi",
    "Mengeluh kepada rekan terdekat",
    "Menunggu rotasi jabatan"
  ],
  a: 2,
  e: "Perbaikan struktural menunjukkan kepemimpinan kolaboratif.",
  c: "Optimalisasi Peran"
},
{
  q: "Dalam rapat evaluasi, tim Anda gagal mencapai target dan publik dirugikan. Pimpinan meminta Anda mencari pihak yang bertanggung jawab. Sikap paling tepat adalah ‚Ä¶",
  o: [
    "Menunjuk anggota yang paling lemah",
    "Mengalihkan kesalahan ke faktor eksternal",
    "Mengajak tim bertanggung jawab bersama dan menyusun perbaikan",
    "Menolak membahas kegagalan",
    "Menunggu arahan lanjutan"
  ],
  a: 2,
  e: "Akuntabilitas kolektif adalah indikator kematangan kerja tim.",
  c: "Tanggung Jawab Kolektif"
},
{
  q: "Dalam kerja tim lintas budaya, muncul pernyataan rekan yang secara tidak sadar menyinggung kelompok tertentu. Apa respons paling profesional?",
  o: [
    "Membiarkannya agar suasana tidak canggung",
    "Menegur keras di depan forum",
    "Meluruskan secara santun dan edukatif",
    "Melaporkan langsung ke atasan",
    "Menghentikan diskusi"
  ],
  a: 2,
  e: "Komunikasi menghargai martabat semua pihak.",
  c: "Sensitivitas Sosial"
},
{
  q: "Keputusan tim telah disepakati, namun implementasinya menghadapi penolakan internal dari beberapa anggota. Sikap Anda sebagai bagian tim adalah ‚Ä¶",
  o: [
    "Membiarkan karena bukan urusan Anda",
    "Memaksakan pelaksanaan",
    "Membangun kembali komitmen melalui komunikasi",
    "Mengganti anggota yang menolak",
    "Menunda pelaksanaan"
  ],
  a: 2,
  e: "Komitmen tim dibangun melalui komunikasi, bukan paksaan.",
  c: "Manajemen Komitmen"
},
{
  q: "Dalam situasi darurat, atasan meminta keputusan cepat tanpa diskusi tim lengkap. Sebagai ASN profesional, Anda sebaiknya ‚Ä¶",
  o: [
    "Menolak karena tidak prosedural",
    "Mengambil keputusan sepihak",
    "Memberi masukan singkat berbasis risiko dan dampak",
    "Diam dan menunggu",
    "Mengalihkan tanggung jawab"
  ],
  a: 2,
  e: "HOTS TKP menilai keseimbangan antara kecepatan dan kehati-hatian.",
  c: "Keputusan dalam Tekanan"
},
{
  q: "Tim Anda berhasil menyelesaikan proyek besar. Pimpinan hanya menyebut satu nama sebagai kunci keberhasilan. Sikap terbaik Anda adalah ‚Ä¶",
  o: [
    "Protes secara terbuka",
    "Menyimpan rasa kecewa",
    "Tetap profesional dan memperkuat budaya apresiasi tim",
    "Menurunkan kualitas kerja ke depan",
    "Menghindari proyek berikutnya"
  ],
  a: 2,
  e: "Fokus pada budaya organisasi jangka panjang.",
  c: "Kematangan Profesional"
},
{
  q: "Dalam diskusi tim, muncul ide inovatif dari anggota junior yang bertentangan dengan kebiasaan lama. Mayoritas ragu. Sikap Anda seharusnya ‚Ä¶",
  o: [
    "Menolaknya karena belum teruji",
    "Mengabaikan karena junior",
    "Mendorong evaluasi objektif ide tersebut",
    "Menunggu arahan pimpinan",
    "Menertawakan ide tersebut"
  ],
  a: 2,
  e: "HOTS menilai keterbukaan terhadap inovasi.",
  c: "Inovasi dalam Tim"
},
{
  q: "Saat konflik antar anggota tim mulai bersifat personal dan mengganggu kinerja, langkah paling tepat adalah ‚Ä¶",
  o: [
    "Membiarkannya agar selesai sendiri",
    "Memihak salah satu pihak",
    "Memfasilitasi penyelesaian berbasis masalah",
    "Melaporkan langsung ke pimpinan tertinggi",
    "Mengganti struktur tim"
  ],
  a: 2,
  e: "Konflik harus diarahkan kembali ke isu substantif.",
  c: "Resolusi Konflik"
},
{
  q: "Anda mengetahui ada anggota tim yang pasif dan hanya mengikuti keputusan tanpa kontribusi. Sikap paling konstruktif adalah ‚Ä¶",
  o: [
    "Membiarkannya",
    "Menegurnya di depan tim",
    "Mengajak terlibat dan memberi ruang kontribusi",
    "Mengurangi perannya diam-diam",
    "Melaporkannya"
  ],
  a: 2,
  e: "Kerja tim menuntut partisipasi aktif seluruh anggota.",
  c: "Pemberdayaan Anggota"
},
{
  q: "Dalam evaluasi kebijakan tim, data menunjukkan hasil tidak optimal meski proses sudah sesuai aturan. Sikap terbaik adalah ‚Ä¶",
  o: [
    "Menyalahkan implementasi",
    "Menganggap kebijakan sudah benar",
    "Mengevaluasi substansi kebijakan secara terbuka",
    "Menutup hasil evaluasi",
    "Menunggu tekanan publik"
  ],
  a: 2,
  e: "ASN dinilai dari kemauan belajar dan berbenah.",
  c: "Evaluasi Kebijakan"
},
{
  q: "Tim Anda menghadapi tekanan politik agar keputusan diubah. Sikap profesional ASN adalah ‚Ä¶",
  o: [
    "Langsung mengikuti tekanan",
    "Menolak tanpa komunikasi",
    "Menjaga keputusan sambil menempuh mekanisme resmi",
    "Menyerahkan ke media",
    "Menghindari keterlibatan"
  ],
  a: 2,
  e: "Integritas dan prosedur adalah kunci.",
  c: "Tekanan Eksternal"
},
{
  q: "Dalam kerja tim, Anda merasa pendapat Anda sering diabaikan. Sikap paling dewasa adalah ‚Ä¶",
  o: [
    "Berhenti menyampaikan pendapat",
    "Meluapkan emosi",
    "Menyampaikan pendapat secara konsisten dan berbasis argumen",
    "Menarik diri",
    "Menyalahkan tim"
  ],
  a: 2,
  e: "HOTS menilai ketangguhan dan komunikasi asertif.",
  c: "Keteguhan Profesional"
},
{
  q: "Jika keputusan tim terbukti keliru setelah dilaksanakan, sikap ASN paling tepat adalah ‚Ä¶",
  o: [
    "Menyalahkan kondisi",
    "Menutupi kesalahan",
    "Mengakui dan memperbaiki secara kolektif",
    "Menyerahkan ke pihak lain",
    "Menghindari evaluasi"
  ],
  a: 2,
  e: "Kejujuran dan perbaikan berkelanjutan adalah inti profesionalisme.",
  c: "Pembelajaran Organisasi"
},
{
  q: "Dalam tim nasional, perbedaan kepentingan daerah sangat kuat. Sikap paling strategis adalah ‚Ä¶",
  o: [
    "Mengutamakan daerah sendiri",
    "Mengikuti daerah mayoritas",
    "Mencari solusi yang adil dan berimbang",
    "Menunda keputusan",
    "Menghindari konflik"
  ],
  a: 2,
  e: "ASN berpikir dalam kerangka kepentingan nasional.",
  c: "Kepentingan Publik"
},
{
  q: "Kerja tim yang benar-benar matang ditunjukkan ketika ‚Ä¶",
  o: [
    "Tidak ada perbedaan pendapat",
    "Semua patuh tanpa diskusi",
    "Perbedaan dikelola menjadi keputusan berkualitas",
    "Pimpinan selalu benar",
    "Target tercapai dengan tekanan"
  ],
  a: 2,
  e: "Kematangan tim diukur dari kualitas proses dan keputusan.",
  c: "Kematangan Tim"
},
{
  q: "Sebagai ASN, indikator tertinggi keberhasilan kerja tim adalah ‚Ä¶",
  o: [
    "Pengakuan individu",
    "Minim konflik internal",
    "Manfaat nyata bagi masyarakat",
    "Kepuasan pimpinan",
    "Kecepatan kerja"
  ],
  a: 2,
  e: "Orientasi akhir ASN adalah pelayanan publik.",
  c: "Orientasi Pelayanan Publik"
}


  
];

/* ===============================
   üî¢ STATE & GAMIFIKASI
================================ */
let index = 0;
let score = 0;
let answered = false;
let kp = 0;
let level = 1;
let analytics = {};

/* ===============================
   üéÆ GAMIFICATION UI
================================ */
function updateGamification() {
  document.getElementById("kp").innerText = kp;
  document.getElementById("level").innerText = level;
}

/* ===============================
   üîÄ SHUFFLE OPSI JAWABAN
   (AMAN & TANPA RUSAK BANK SOAL)
================================ */
function shuffleQuestion(question) {
  // pasangkan opsi + status benar
  const paired = question.o.map((text, idx) => ({
    text,
    isCorrect: idx === question.a
  }));

  // Fisher‚ÄìYates shuffle
  for (let i = paired.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [paired[i], paired[j]] = [paired[j], paired[i]];
  }

  // update opsi & index jawaban benar
  question.o = paired.map(p => p.text);
  question.a = paired.findIndex(p => p.isCorrect);

  return question;
}

/* ===============================
   üìÑ LOAD SOAL (OPSINYA DIAKAC)
================================ */
let currentQuestion = null;

function loadQuestion() {
  answered = false;

  // clone soal agar bank asli tidak berubah
  currentQuestion = shuffleQuestion(
    JSON.parse(JSON.stringify(questions[index]))
  );

  document.getElementById("progress").innerText =
    `Soal ${index + 1} dari ${questions.length}`;
  document.getElementById("question").innerText = currentQuestion.q;
  document.getElementById("explanation").style.display = "none";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  currentQuestion.o.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
    btn.onclick = () => selectAnswer(i);
    optionsDiv.appendChild(btn);
  });

  // start timer hanya sekali
  if (index === 0 && !startTime) {
    startTime = new Date();
    startTimer();
  }
}

/* ===============================
   ‚úÖ PILIH JAWABAN
================================ */
function selectAnswer(i) {
  if (answered) return;
  answered = true;

  const q = currentQuestion;
  const buttons = document.querySelectorAll(".options button");

  buttons.forEach((b, idx) => {
    if (idx === q.a) b.classList.add("correct");
    if (idx === i && i !== q.a) b.classList.add("wrong");
    b.disabled = true;
  });

  if (i === q.a) {
    score += 5;
    kp += 10;
    level = Math.floor(kp / 50) + 1;
    updateGamification();
  } else {
    analytics[q.c] = (analytics[q.c] || 0) + 1;
  }

  const exp = document.getElementById("explanation");
  exp.innerText = q.e;
  exp.style.display = "block";
}

/* ===============================
   ‚ñ∂Ô∏è SOAL BERIKUTNYA
================================ */
function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishExam();
  }
}


/* ===============================
   üèÅ SELESAI UJIAN
   ANALITIK + GRAFIK + ADAPTIVE TEST
================================ */
function finishExam() {
  clearInterval(timerInterval);

  const endTime = new Date();
  const durationSec = Math.max(1, Math.floor((endTime - startTime) / 1000));
  const avgTime = durationSec / questions.length;

  const correct = score / 5;
  const wrong = questions.length - correct;
  const errorRate = wrong / questions.length;

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";

  document.getElementById("finalScore").innerText =
    `${score} / ${questions.length * 5}`;
  document.getElementById("finalKP").innerText = kp;
  document.getElementById("finalLevel").innerText = level;

  /* ===============================
     üìä GRAFIK AREA LEMAH
  ============================== */
  let graphHTML = "";
  if (Object.keys(analytics).length > 0) {
    const max = Math.max(...Object.values(analytics));
    graphHTML += `<h4>üìä Distribusi Kesalahan</h4>`;
    Object.entries(analytics).forEach(([area, count]) => {
      graphHTML += `
        <div style="margin-bottom:8px">
          <div style="font-size:13px">${area}</div>
          <div style="background:#e5e7eb;border-radius:6px">
            <div style="
              width:${(count/max)*100}%;
              background:linear-gradient(135deg,#f59e0b,#ef4444);
              color:white;
              padding:4px 8px;
              font-size:12px
            ">
              ${count} salah
            </div>
          </div>
        </div>
      `;
    });
  }

  /* ===============================
     üß† ADAPTIVE RECOMMENDATION
  ============================== */
  let focusArea = Object.keys(analytics).length
    ? Object.entries(analytics).sort((a,b)=>b[1]-a[1])[0][0]
    : "Penguatan umum";

  let adaptiveHTML = `<h4>üß† Rekomendasi Latihan Berikutnya</h4><ul>`;

  if (avgTime > 75 && errorRate > 0.3) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Ragu-ragu</li>
      <li><strong>Fokus:</strong> ${focusArea}</li>
      <li><strong>Mode:</strong> Speed Drill (10 soal)</li>
      <li><strong>Target:</strong> ‚â§ 60 detik/soal</li>
    `;
  } else if (avgTime < 45 && errorRate > 0.4) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Cepat tapi ceroboh</li>
      <li><strong>Fokus:</strong> Analisis konteks</li>
      <li><strong>Mode:</strong> HOTS Naratif</li>
      <li><strong>Target:</strong> 80‚Äì90 detik/soal</li>
    `;
  } else if (avgTime > 75 && errorRate <= 0.2) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Akurat tapi lambat</li>
      <li><strong>Fokus:</strong> Efisiensi keputusan</li>
      <li><strong>Mode:</strong> Time-bound Practice</li>
      <li><strong>Target:</strong> 55‚Äì60 detik/soal</li>
    `;
  } else {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Stabil</li>
      <li><strong>Fokus:</strong> Konsistensi</li>
      <li><strong>Mode:</strong> Mini Tryout Adaptif</li>
      <li><strong>Target:</strong> 60‚Äì70 detik/soal</li>
    `;
  }

  adaptiveHTML += `</ul>`;

  document.getElementById("scoreText").innerHTML = `
    ${graphHTML}
    <div style="margin-top:16px">
      ‚è±Ô∏è <strong>Waktu:</strong> ${Math.floor(durationSec/60)} menit ${durationSec%60} detik<br>
      ‚è≥ <strong>Rata-rata:</strong> ${Math.round(avgTime)} detik/soal
    </div>
    <div style="margin-top:16px">${adaptiveHTML}</div>
  `;

  /* ===============================
     üíæ SIMPAN RIWAYAT
  ============================== */
  const history = JSON.parse(localStorage.getItem("twkHistory")) || [];
  history.push({
    date: new Date().toLocaleString(),
    score,
    kp,
    level,
    durationSec,
    avgTime,
    analytics
  });
  localStorage.setItem("twkHistory", JSON.stringify(history));
}

/* ===============================
   üöÄ START
================================ */
loadQuestion();
</script>



</body>
</html>
