<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Soal TWK CPNS ‚Äì Pancasila</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: #f4f6f9;
  color: #1f2937;
}

header {
  background: linear-gradient(135deg, #1e3a8a, #2563eb);
  color: white;
  padding: 35px 20px;
  text-align: center;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 30px 20px;
}

.card {
  background: white;
  border-radius: 14px;
  padding: 30px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.progress {
  margin-bottom: 20px;
  font-weight: 600;
}

.question {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.options button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  cursor: pointer;
  transition: all 0.2s ease;
}

.options button:hover {
  background: #eef2ff;
}

.options button.correct {
  background: #dcfce7;
  border-color: #22c55e;
  font-weight: 600;
}

.options button.wrong {
  background: #fee2e2;
  border-color: #ef4444;
}

.explanation {
  margin-top: 20px;
  padding: 15px;
  background: #fef3c7;
  border-left: 5px solid #f59e0b;
  border-radius: 8px;
  display: none;
}

.controls {
  margin-top: 25px;
  text-align: right;
}

.controls button {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  background: #2563eb;
  color: white;
}

.result {
  text-align: center;
  display: none;
}

.result h2 {
  margin-bottom: 10px;
}

.timer {
  font-weight: 700;
  font-size: 16px;
  color: #dc2626;
  margin-bottom: 15px;
}

#gamification {
  margin-top: 10px;
  font-weight: 600;
  animation: pop 0.6s ease;
}

@keyframes pop {
  0% { transform: scale(0.8); }
  100% { transform: scale(1); }
}

/* ===============================
   üìä RESULT DASHBOARD
================================ */
.result {
  display: none;
}

.result-title {
  text-align: center;
  margin-bottom: 25px;
  color: #1e40af;
}

.result-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px;
  margin-bottom: 30px;
}

.summary-box {
  background: #f8fafc;
  border-radius: 12px;
  padding: 18px;
  text-align: center;
  box-shadow: inset 0 0 0 1px #e5e7eb;
}

.summary-box .label {
  display: block;
  font-size: 14px;
  color: #64748b;
  margin-bottom: 6px;
}

.summary-box .value {
  font-size: 22px;
  font-weight: 700;
  color: #0f172a;
}

.result-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
}

.result-section h3 {
  margin-bottom: 12px;
  color: #334155;
}

.result-section ul {
  padding-left: 18px;
}

.result-section li {
  margin-bottom: 8px;
  line-height: 1.6;
}

.result-actions {
  margin-top: 30px;
  text-align: center;
}

.result-actions button {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.result-actions button:hover {
  opacity: 0.9;
}


</style>
</head>

<body>

<header>
  <h1>Latihan Soal TKP CPNS</h1>
  <p>Adaptasi ¬∑ Standar CPNS</p>
<div id="gamification">
  ‚≠ê KP: <span id="kp">0</span> |
  üéñÔ∏è Level: <span id="level">1</span>
</div>

</header>

<div class="container">
  <div class="card" id="quiz">
    <div class="timer" id="timer">
  ‚è±Ô∏è Sisa Waktu: <span id="time">20:00</span>
</div>

    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div class="explanation" id="explanation"></div>

    <div class="controls">
      <button onclick="nextQuestion()">Soal Berikutnya</button>
    </div>
  </div>

<div class="card result" id="result">

  <h2 class="result-title">üìä Hasil Evaluasi Latihan TKP</h2>

  <!-- RINGKASAN NILAI -->
  <div class="result-summary">
    <div class="summary-box">
      <span class="label">Skor</span>
      <span class="value" id="finalScore">‚Äì</span>
    </div>
    <div class="summary-box">
      <span class="label">Knowledge Point</span>
      <span class="value" id="finalKP">‚Äì</span>
    </div>
    <div class="summary-box">
      <span class="label">Level</span>
      <span class="value" id="finalLevel">‚Äì</span>
    </div>
  </div>

  <!-- ANALITIK -->
  <div class="result-section">
    <h3>üìå Analisis Area TKP</h3>
    <div id="scoreText"></div>
  </div>

  <!-- CTA -->
  <div class="result-actions">
    <button onclick="location.reload()">üîÅ Ulangi Latihan</button>
  </div>

</div>


<script>
/* ===============================
   ‚è±Ô∏è TIMER BKN
================================ */
let totalTime = 20 * 60;
let timerInterval;
let startTime = null;

function startTimer() {
  if (timerInterval) return;

  timerInterval = setInterval(() => {
    totalTime--;

    const min = Math.floor(totalTime / 60);
    const sec = totalTime % 60;
    document.getElementById("time").innerText =
      `${min}:${sec.toString().padStart(2, "0")}`;

    if (totalTime <= 0) {
      clearInterval(timerInterval);
      finishExam();
    }
  }, 1000);
}

/* ===============================
   üìò BANK SOAL (20 SOAL FIX)
================================ */
const questions = [
  /* === ISI BANK SOAL 1‚Äì20 (TETAP SEPERTI SEBELUMNYA) === */
  
/* =================================================
   üìò BANK SOAL TWK
   ADAPTASI DAN PENGENDALIAN DIRI ASN (20 SOAL)
================================================= */

/* ===== LEVEL RINGAN (1‚Äì6)
   PEMAHAMAN DASAR SIKAP ASN
================================ */

{
  q: "Terjadi perubahan prosedur kerja di unit pelayanan. Sikap ASN yang paling mencerminkan adaptasi dan pengendalian diri adalah ‚Ä¶",
  o: [
    "Menolak perubahan karena sudah terbiasa dengan cara lama",
    "Mengeluh karena perubahan dianggap menyulitkan",
    "Mempelajari prosedur baru dan menyesuaikan cara kerja",
    "Menunggu hingga perubahan tersebut dibatalkan",
    "Tetap bekerja seperti biasa tanpa menyesuaikan"
  ],
  a: 2,
  e: "Sikap adaptif ditunjukkan dengan kesediaan belajar dan menyesuaikan diri terhadap perubahan.",
  c: "Adaptasi ASN"
},
{
  q: "Saat menghadapi tekanan kerja tinggi, sikap ASN yang mencerminkan pengendalian diri adalah ‚Ä¶",
  o: [
    "Mudah tersinggung terhadap rekan kerja",
    "Melampiaskan emosi di tempat kerja",
    "Tetap tenang dan mengatur prioritas pekerjaan",
    "Menghindari tanggung jawab",
    "Menyalahkan sistem dan pimpinan"
  ],
  a: 2,
  e: "Pengendalian emosi membantu ASN tetap profesional dalam tekanan.",
  c: "Pengelolaan Emosi ASN"
},
{
  q: "ASN yang menerima kritik masyarakat tanpa defensif telah menunjukkan kemampuan ‚Ä¶",
  o: [
    "Ketahanan fisik",
    "Adaptasi teknologi",
    "Pengendalian diri dan keterbukaan",
    "Kepatuhan struktural",
    "Dominasi emosional"
  ],
  a: 2,
  e: "Respon terbuka terhadap kritik menunjukkan kematangan emosional.",
  c: "Respon terhadap Kritik"
},
{
  q: "Menyesuaikan diri dengan rekan kerja yang memiliki gaya kerja berbeda merupakan contoh ‚Ä¶",
  o: [
    "Sikap pasif",
    "Adaptasi sosial",
    "Penurunan standar kerja",
    "Kompromi nilai",
    "Penghindaran konflik"
  ],
  a: 1,
  e: "Adaptasi sosial penting dalam lingkungan kerja ASN yang beragam.",
  c: "Adaptasi Sosial ASN"
},
{
  q: "ASN yang tetap menjaga etika komunikasi meskipun sedang emosi menunjukkan ‚Ä¶",
  o: [
    "Tekanan kerja tinggi",
    "Pengendalian diri",
    "Ketegasan berlebihan",
    "Sikap defensif",
    "Kepatuhan formal"
  ],
  a: 1,
  e: "Pengendalian diri tercermin dari kemampuan mengelola emosi secara profesional.",
  c: "Etika dan Emosi ASN"
},
{
  q: "Sikap tidak adaptif ASN terhadap perubahan kebijakan ditunjukkan oleh perilaku ‚Ä¶",
  o: [
    "Belajar kebijakan baru",
    "Bertanya untuk memahami perubahan",
    "Menolak perubahan demi kenyamanan pribadi",
    "Menyesuaikan jadwal kerja",
    "Mencari solusi alternatif"
  ],
  a: 2,
  e: "Menolak perubahan adalah ciri perilaku tidak adaptif.",
  c: "Perilaku Tidak Adaptif ASN"
},

/* ===== LEVEL MENENGAH (7‚Äì13)
   APLIKASI DALAM PEKERJAAN ASN
================================ */

{
  q: "Ketika terjadi konflik pendapat dalam tim kerja, sikap ASN yang paling mencerminkan pengendalian diri adalah ‚Ä¶",
  o: [
    "Memaksakan pendapat pribadi",
    "Meninggalkan forum diskusi",
    "Menyampaikan pendapat secara rasional dan santun",
    "Menyerang pendapat rekan kerja",
    "Diam tanpa berpartisipasi"
  ],
  a: 2,
  e: "Pengendalian diri ditunjukkan melalui komunikasi yang objektif dan santun.",
  c: "Pengendalian Diri dalam Konflik"
},
{
  q: "Beban kerja meningkat secara mendadak akibat kebijakan baru. Tindakan ASN yang paling tepat adalah ‚Ä¶",
  o: [
    "Mengeluh kepada masyarakat",
    "Menurunkan kualitas pelayanan",
    "Mengatur ulang prioritas kerja",
    "Menunda penyelesaian tugas",
    "Menyalahkan pimpinan"
  ],
  a: 2,
  e: "Manajemen stres dan prioritas adalah bagian dari adaptasi kerja.",
  c: "Ketahanan terhadap Tekanan"
},
{
  q: "ASN yang mampu bekerja efektif meskipun berada di bawah sorotan publik menunjukkan ‚Ä¶",
  o: [
    "Ketahanan emosional",
    "Ketergantungan sistem",
    "Dominasi jabatan",
    "Kepatuhan pasif",
    "Kekakuan sikap"
  ],
  a: 0,
  e: "Ketahanan emosional mendukung kinerja profesional.",
  c: "Resiliensi ASN"
},
{
  q: "Dalam menghadapi perubahan teknologi pelayanan, sikap ASN yang paling profesional adalah ‚Ä¶",
  o: [
    "Menolak karena merasa tidak mampu",
    "Menunggu perintah khusus",
    "Belajar dan menyesuaikan diri dengan teknologi baru",
    "Menghindari penggunaan teknologi",
    "Menyerahkan tugas kepada rekan lain"
  ],
  a: 2,
  e: "Adaptasi teknologi merupakan bagian dari profesionalitas ASN.",
  c: "Adaptasi Teknologi ASN"
},
{
  q: "Respon ASN yang paling tepat saat menerima kritik keras dari masyarakat adalah ‚Ä¶",
  o: [
    "Membalas kritik dengan emosi",
    "Mengabaikan kritik tersebut",
    "Mendengarkan dan menjadikannya bahan evaluasi",
    "Memblokir akses pengaduan",
    "Menyalahkan pihak lain"
  ],
  a: 2,
  e: "Kritik adalah masukan untuk perbaikan kinerja.",
  c: "Respon Konstruktif terhadap Kritik"
},
{
  q: "Pengendalian diri ASN paling terlihat ketika ‚Ä¶",
  o: [
    "Menghadapi situasi kerja yang nyaman",
    "Tidak ada tekanan pekerjaan",
    "Berada dalam situasi konflik dan tekanan",
    "Bekerja sendiri tanpa tim",
    "Tidak berinteraksi dengan publik"
  ],
  a: 2,
  e: "Pengendalian diri diuji saat tekanan tinggi.",
  c: "Pengendalian Emosi ASN"
},
{
  q: "ASN yang fokus mencari solusi dibanding menyalahkan keadaan menunjukkan prinsip ‚Ä¶",
  o: [
    "Reaktivitas",
    "Orientasi masalah",
    "Orientasi solusi",
    "Kepatuhan formal",
    "Penghindaran risiko"
  ],
  a: 2,
  e: "Orientasi solusi mencerminkan kedewasaan sikap ASN.",
  c: "Orientasi Solusi ASN"
},

/* ===== LEVEL TINGGI / HOTS (14‚Äì20)
   ANALISIS SIKAP DAN PENGAMBILAN KEPUTUSAN
================================ */

{
  q: "Terjadi perubahan kebijakan mendadak yang menimbulkan pro dan kontra di masyarakat. Sikap ASN yang paling sesuai adalah ‚Ä¶",
  o: [
    "Menolak melaksanakan kebijakan",
    "Melaksanakan tanpa memahami kebijakan",
    "Mempelajari kebijakan dan menyampaikannya secara rasional",
    "Menghindari interaksi dengan masyarakat",
    "Menunggu situasi mereda"
  ],
  a: 2,
  e: "Adaptasi dan komunikasi yang baik mencegah konflik sosial.",
  c: "Adaptasi Kebijakan ASN"
},
{
  q: "ASN yang mampu mengendalikan emosi saat menghadapi provokasi publik telah menunjukkan ‚Ä¶",
  o: [
    "Kepatuhan struktural",
    "Ketegasan emosional",
    "Kematangan emosional",
    "Dominasi jabatan",
    "Sikap defensif"
  ],
  a: 2,
  e: "Kematangan emosional penting dalam pelayanan publik.",
  c: "Kematangan Emosi ASN"
},
{
  q: "Ketika perubahan organisasi menimbulkan ketidaknyamanan pribadi, ASN seharusnya ‚Ä¶",
  o: [
    "Menolak perubahan tersebut",
    "Mengeluh secara terbuka",
    "Menyesuaikan diri demi kepentingan organisasi",
    "Mengurangi kinerja",
    "Mencari pembenaran pribadi"
  ],
  a: 2,
  e: "Adaptasi adalah bagian dari profesionalitas ASN.",
  c: "Adaptasi Organisasi ASN"
},
{
  q: "Pengendalian diri ASN paling dibutuhkan ketika ‚Ä¶",
  o: [
    "Semua pekerjaan berjalan lancar",
    "Tidak ada tekanan kerja",
    "Menghadapi konflik dan kritik keras",
    "Bekerja sendiri",
    "Mengikuti rutinitas lama"
  ],
  a: 2,
  e: "Situasi sulit menuntut pengendalian emosi yang baik.",
  c: "Pengendalian Diri ASN"
},
{
  q: "Sikap adaptif ASN berkontribusi langsung terhadap ‚Ä¶",
  o: [
    "Penurunan akuntabilitas",
    "Konflik internal",
    "Stabilitas dan kualitas pelayanan publik",
    "Dominasi kelompok tertentu",
    "Kepentingan pribadi"
  ],
  a: 2,
  e: "Adaptasi mendukung pelayanan publik yang berkualitas.",
  c: "Dampak Adaptasi ASN"
},
{
  q: "Ketika menghadapi tekanan target dan ekspektasi publik sekaligus, ASN seharusnya ‚Ä¶",
  o: [
    "Mengorbankan kualitas layanan",
    "Menghindari tanggung jawab",
    "Mengelola stres dan bekerja secara profesional",
    "Menyalahkan sistem",
    "Menunda pekerjaan"
  ],
  a: 2,
  e: "Pengendalian diri menjaga kinerja tetap stabil.",
  c: "Manajemen Stres ASN"
},
{
  q: "Kemampuan adaptasi dan pengendalian diri ASN mencerminkan nilai Pancasila terutama sila ‚Ä¶",
  o: [
    "Ketuhanan Yang Maha Esa",
    "Kemanusiaan yang adil dan beradab",
    "Persatuan Indonesia",
    "Kerakyatan",
    "Keadilan sosial"
  ],
  a: 1,
  e: "Sikap dewasa, rasional, dan beradab mencerminkan sila kedua.",
  c: "Nilai Pancasila dalam ASN"
}


  
];

/* ===============================
   üî¢ STATE & GAMIFIKASI
================================ */
let index = 0;
let score = 0;
let answered = false;
let kp = 0;
let level = 1;
let analytics = {};

/* ===============================
   üéÆ GAMIFICATION UI
================================ */
function updateGamification() {
  document.getElementById("kp").innerText = kp;
  document.getElementById("level").innerText = level;
}

/* ===============================
   üîÄ SHUFFLE OPSI JAWABAN
   (AMAN & TANPA RUSAK BANK SOAL)
================================ */
function shuffleQuestion(question) {
  // pasangkan opsi + status benar
  const paired = question.o.map((text, idx) => ({
    text,
    isCorrect: idx === question.a
  }));

  // Fisher‚ÄìYates shuffle
  for (let i = paired.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [paired[i], paired[j]] = [paired[j], paired[i]];
  }

  // update opsi & index jawaban benar
  question.o = paired.map(p => p.text);
  question.a = paired.findIndex(p => p.isCorrect);

  return question;
}

/* ===============================
   üìÑ LOAD SOAL (OPSINYA DIAKAC)
================================ */
let currentQuestion = null;

function loadQuestion() {
  answered = false;

  // clone soal agar bank asli tidak berubah
  currentQuestion = shuffleQuestion(
    JSON.parse(JSON.stringify(questions[index]))
  );

  document.getElementById("progress").innerText =
    `Soal ${index + 1} dari ${questions.length}`;
  document.getElementById("question").innerText = currentQuestion.q;
  document.getElementById("explanation").style.display = "none";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  currentQuestion.o.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
    btn.onclick = () => selectAnswer(i);
    optionsDiv.appendChild(btn);
  });

  // start timer hanya sekali
  if (index === 0 && !startTime) {
    startTime = new Date();
    startTimer();
  }
}

/* ===============================
   ‚úÖ PILIH JAWABAN
================================ */
function selectAnswer(i) {
  if (answered) return;
  answered = true;

  const q = currentQuestion;
  const buttons = document.querySelectorAll(".options button");

  buttons.forEach((b, idx) => {
    if (idx === q.a) b.classList.add("correct");
    if (idx === i && i !== q.a) b.classList.add("wrong");
    b.disabled = true;
  });

  if (i === q.a) {
    score += 5;
    kp += 10;
    level = Math.floor(kp / 50) + 1;
    updateGamification();
  } else {
    analytics[q.c] = (analytics[q.c] || 0) + 1;
  }

  const exp = document.getElementById("explanation");
  exp.innerText = q.e;
  exp.style.display = "block";
}

/* ===============================
   ‚ñ∂Ô∏è SOAL BERIKUTNYA
================================ */
function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishExam();
  }
}


/* ===============================
   üèÅ SELESAI UJIAN
   ANALITIK + GRAFIK + ADAPTIVE TEST
================================ */
function finishExam() {
  clearInterval(timerInterval);

  const endTime = new Date();
  const durationSec = Math.max(1, Math.floor((endTime - startTime) / 1000));
  const avgTime = durationSec / questions.length;

  const correct = score / 5;
  const wrong = questions.length - correct;
  const errorRate = wrong / questions.length;

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";

  document.getElementById("finalScore").innerText =
    `${score} / ${questions.length * 5}`;
  document.getElementById("finalKP").innerText = kp;
  document.getElementById("finalLevel").innerText = level;

  /* ===============================
     üìä GRAFIK AREA LEMAH
  ============================== */
  let graphHTML = "";
  if (Object.keys(analytics).length > 0) {
    const max = Math.max(...Object.values(analytics));
    graphHTML += `<h4>üìä Distribusi Kesalahan</h4>`;
    Object.entries(analytics).forEach(([area, count]) => {
      graphHTML += `
        <div style="margin-bottom:8px">
          <div style="font-size:13px">${area}</div>
          <div style="background:#e5e7eb;border-radius:6px">
            <div style="
              width:${(count/max)*100}%;
              background:linear-gradient(135deg,#f59e0b,#ef4444);
              color:white;
              padding:4px 8px;
              font-size:12px
            ">
              ${count} salah
            </div>
          </div>
        </div>
      `;
    });
  }

  /* ===============================
     üß† ADAPTIVE RECOMMENDATION
  ============================== */
  let focusArea = Object.keys(analytics).length
    ? Object.entries(analytics).sort((a,b)=>b[1]-a[1])[0][0]
    : "Penguatan umum";

  let adaptiveHTML = `<h4>üß† Rekomendasi Latihan Berikutnya</h4><ul>`;

  if (avgTime > 75 && errorRate > 0.3) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Ragu-ragu</li>
      <li><strong>Fokus:</strong> ${focusArea}</li>
      <li><strong>Mode:</strong> Speed Drill (10 soal)</li>
      <li><strong>Target:</strong> ‚â§ 60 detik/soal</li>
    `;
  } else if (avgTime < 45 && errorRate > 0.4) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Cepat tapi ceroboh</li>
      <li><strong>Fokus:</strong> Analisis konteks</li>
      <li><strong>Mode:</strong> HOTS Naratif</li>
      <li><strong>Target:</strong> 80‚Äì90 detik/soal</li>
    `;
  } else if (avgTime > 75 && errorRate <= 0.2) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Akurat tapi lambat</li>
      <li><strong>Fokus:</strong> Efisiensi keputusan</li>
      <li><strong>Mode:</strong> Time-bound Practice</li>
      <li><strong>Target:</strong> 55‚Äì60 detik/soal</li>
    `;
  } else {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Stabil</li>
      <li><strong>Fokus:</strong> Konsistensi</li>
      <li><strong>Mode:</strong> Mini Tryout Adaptif</li>
      <li><strong>Target:</strong> 60‚Äì70 detik/soal</li>
    `;
  }

  adaptiveHTML += `</ul>`;

  document.getElementById("scoreText").innerHTML = `
    ${graphHTML}
    <div style="margin-top:16px">
      ‚è±Ô∏è <strong>Waktu:</strong> ${Math.floor(durationSec/60)} menit ${durationSec%60} detik<br>
      ‚è≥ <strong>Rata-rata:</strong> ${Math.round(avgTime)} detik/soal
    </div>
    <div style="margin-top:16px">${adaptiveHTML}</div>
  `;

  /* ===============================
     üíæ SIMPAN RIWAYAT
  ============================== */
  const history = JSON.parse(localStorage.getItem("twkHistory")) || [];
  history.push({
    date: new Date().toLocaleString(),
    score,
    kp,
    level,
    durationSec,
    avgTime,
    analytics
  });
  localStorage.setItem("twkHistory", JSON.stringify(history));
}

/* ===============================
   üöÄ START
================================ */
loadQuestion();
</script>



</body>
</html>
