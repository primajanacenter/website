<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Soal TWK CPNS ‚Äì Pancasila</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: #f4f6f9;
  color: #1f2937;
}

header {
  background: linear-gradient(135deg, #1e3a8a, #2563eb);
  color: white;
  padding: 35px 20px;
  text-align: center;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 30px 20px;
}

.card {
  background: white;
  border-radius: 14px;
  padding: 30px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.progress {
  margin-bottom: 20px;
  font-weight: 600;
}

.question {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.options button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  cursor: pointer;
  transition: all 0.2s ease;
}

.options button:hover {
  background: #eef2ff;
}

.options button.correct {
  background: #dcfce7;
  border-color: #22c55e;
  font-weight: 600;
}

.options button.wrong {
  background: #fee2e2;
  border-color: #ef4444;
}

.explanation {
  margin-top: 20px;
  padding: 15px;
  background: #fef3c7;
  border-left: 5px solid #f59e0b;
  border-radius: 8px;
  display: none;
}

.controls {
  margin-top: 25px;
  text-align: right;
}

.controls button {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  background: #2563eb;
  color: white;
}

.result {
  text-align: center;
  display: none;
}

.result h2 {
  margin-bottom: 10px;
}

.timer {
  font-weight: 700;
  font-size: 16px;
  color: #dc2626;
  margin-bottom: 15px;
}

#gamification {
  margin-top: 10px;
  font-weight: 600;
  animation: pop 0.6s ease;
}

@keyframes pop {
  0% { transform: scale(0.8); }
  100% { transform: scale(1); }
}

/* ===============================
   üìä RESULT DASHBOARD
================================ */
.result {
  display: none;
}

.result-title {
  text-align: center;
  margin-bottom: 25px;
  color: #1e40af;
}

.result-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px;
  margin-bottom: 30px;
}

.summary-box {
  background: #f8fafc;
  border-radius: 12px;
  padding: 18px;
  text-align: center;
  box-shadow: inset 0 0 0 1px #e5e7eb;
}

.summary-box .label {
  display: block;
  font-size: 14px;
  color: #64748b;
  margin-bottom: 6px;
}

.summary-box .value {
  font-size: 22px;
  font-weight: 700;
  color: #0f172a;
}

.result-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
}

.result-section h3 {
  margin-bottom: 12px;
  color: #334155;
}

.result-section ul {
  padding-left: 18px;
}

.result-section li {
  margin-bottom: 8px;
  line-height: 1.6;
}

.result-actions {
  margin-top: 30px;
  text-align: center;
}

.result-actions button {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.result-actions button:hover {
  opacity: 0.9;
}


</style>
</head>

<body>

<header>
  <h1>Latihan Soal TWK CPNS</h1>
  <p>NKRI ¬∑ Standar CPNS</p>
<div id="gamification">
  ‚≠ê KP: <span id="kp">0</span> |
  üéñÔ∏è Level: <span id="level">1</span>
</div>

</header>

<div class="container">
  <div class="card" id="quiz">
    <div class="timer" id="timer">
  ‚è±Ô∏è Sisa Waktu: <span id="time">20:00</span>
</div>

    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div class="explanation" id="explanation"></div>

    <div class="controls">
      <button onclick="nextQuestion()">Soal Berikutnya</button>
    </div>
  </div>

<div class="card result" id="result">

  <h2 class="result-title">üìä Hasil Evaluasi Latihan TWK</h2>

  <!-- RINGKASAN NILAI -->
  <div class="result-summary">
    <div class="summary-box">
      <span class="label">Skor</span>
      <span class="value" id="finalScore">‚Äì</span>
    </div>
    <div class="summary-box">
      <span class="label">Knowledge Point</span>
      <span class="value" id="finalKP">‚Äì</span>
    </div>
    <div class="summary-box">
      <span class="label">Level</span>
      <span class="value" id="finalLevel">‚Äì</span>
    </div>
  </div>

  <!-- ANALITIK -->
  <div class="result-section">
    <h3>üìå Analisis Area TWK</h3>
    <div id="scoreText"></div>
  </div>

  <!-- CTA -->
  <div class="result-actions">
    <button onclick="location.reload()">üîÅ Ulangi Latihan</button>
  </div>

</div>


<script>
/* ===============================
   ‚è±Ô∏è TIMER BKN
================================ */
let totalTime = 20 * 60;
let timerInterval;
let startTime = null;

function startTimer() {
  if (timerInterval) return;

  timerInterval = setInterval(() => {
    totalTime--;

    const min = Math.floor(totalTime / 60);
    const sec = totalTime % 60;
    document.getElementById("time").innerText =
      `${min}:${sec.toString().padStart(2, "0")}`;

    if (totalTime <= 0) {
      clearInterval(timerInterval);
      finishExam();
    }
  }, 1000);
}

/* ===============================
   üìò BANK SOAL (20 SOAL FIX)
================================ */
const questions = [
  /* === ISI BANK SOAL 1‚Äì20 (TETAP SEPERTI SEBELUMNYA) === */
  
/*********************************************************
 üìò BANK SOAL TWK ‚Äì ADVANCED HOTS (TWK 2026)
 NKRI ‚Ä¢ NEGARA KESATUAN ‚Ä¢ WAWASAN NUSANTARA ‚Ä¢ BELA NEGARA
*********************************************************/

/* ===== LEVEL HOTS LANJUTAN (SEMUA OPSI TAMPAK BENAR)
=================================================== */

{
  q: "Pernyataan yang PALING TEPAT menggambarkan sifat final NKRI dalam perspektif ketatanegaraan adalah ‚Ä¶",
  o: [
    "NKRI merupakan hasil kesepakatan nasional yang tidak dapat diubah melalui mekanisme politik biasa",
    "NKRI dijamin keberlangsungannya oleh konstitusi dan kesadaran kolektif bangsa",
    "NKRI tidak dapat diubah karena berfungsi sebagai perekat keberagaman bangsa",
    "NKRI dipertahankan untuk menjaga stabilitas dan efektivitas pemerintahan",
    "NKRI menjadi bentuk negara yang paling sesuai dengan kondisi geografis Indonesia"
  ],
  a: 1,
  e: "Jawaban paling tepat harus menyebut jaminan konstitusional dan kesadaran kolektif bangsa, bukan sekadar fungsi atau kondisi.",
  c: "Finalitas NKRI"
},
{
  q: "Dalam negara kesatuan, batas utama otonomi daerah secara prinsipil ditentukan oleh ‚Ä¶",
  o: [
    "Kemampuan daerah dalam mengelola sumber daya",
    "Kebutuhan masyarakat lokal yang beragam",
    "Pelimpahan kewenangan dari pemerintah pusat dalam kerangka konstitusi",
    "Kesepakatan politik antara pusat dan daerah",
    "Potensi ekonomi dan budaya daerah"
  ],
  a: 2,
  e: "Otonomi daerah bersumber dari pelimpahan kewenangan pusat, bukan dari hak kedaulatan daerah.",
  c: "Otonomi Daerah dalam NKRI"
},
{
  q: "Kebijakan daerah yang menonjolkan identitas lokal secara berlebihan dapat berbahaya bagi NKRI apabila ‚Ä¶",
  o: [
    "Mengurangi daya tarik investasi nasional",
    "Menyulitkan koordinasi lintas wilayah",
    "Menggeser loyalitas warga dari negara kepada entitas lokal",
    "Menimbulkan resistensi budaya antar daerah",
    "Memperlambat integrasi administratif"
  ],
  a: 2,
  e: "Ancaman paling serius adalah pergeseran loyalitas dari negara ke entitas lokal.",
  c: "Ancaman Disintegrasi"
},
{
  q: "Perbedaan fundamental antara negara kesatuan dan negara federasi terletak pada ‚Ä¶",
  o: [
    "Derajat kemandirian daerah dalam pembangunan",
    "Distribusi kewenangan administratif",
    "Sumber dan sifat kedaulatan negara",
    "Hubungan koordinatif pusat dan daerah",
    "Fleksibilitas kebijakan publik"
  ],
  a: 2,
  e: "Perbedaan mendasar terletak pada kedaulatan, bukan sekadar kewenangan administratif.",
  c: "Kesatuan vs Federasi"
},
{
  q: "Dalam kerangka Wawasan Nusantara, keberagaman budaya daerah diposisikan sebagai ‚Ä¶",
  o: [
    "Identitas unik yang perlu dilindungi secara otonom",
    "Modal sosial yang berkontribusi pada integrasi nasional",
    "Warisan lokal yang harus dipisahkan dari kepentingan nasional",
    "Faktor pembentuk kebijakan daerah",
    "Ciri khas yang membedakan antarwilayah"
  ],
  a: 1,
  e: "Wawasan Nusantara menempatkan keberagaman sebagai modal integrasi nasional.",
  c: "Wawasan Nusantara"
},
{
  q: "Ancaman ideologi terhadap NKRI menjadi sangat berbahaya apabila ‚Ä¶",
  o: [
    "Disampaikan melalui media digital secara masif",
    "Didukung oleh jaringan internasional",
    "Mampu menggantikan Pancasila sebagai rujukan nilai bersama",
    "Menggunakan simbol agama atau budaya",
    "Menarik simpati generasi muda"
  ],
  a: 2,
  e: "Bahaya utama terletak pada potensi menggantikan Pancasila sebagai ideologi pemersatu.",
  c: "Ancaman Ideologi"
},
{
  q: "Ketimpangan pembangunan antarwilayah menjadi ancaman NKRI karena berpotensi ‚Ä¶",
  o: [
    "Menurunkan kepercayaan terhadap pemerintah",
    "Memperlambat pertumbuhan ekonomi nasional",
    "Memicu rasa ketidakadilan dan kecemburuan sosial",
    "Menghambat mobilitas sosial",
    "Menyulitkan pemerataan fiskal"
  ],
  a: 2,
  e: "Rasa ketidakadilan dapat berkembang menjadi konflik dan disintegrasi.",
  c: "Ancaman Ekonomi"
},
{
  q: "Dalam perspektif bela negara modern, tindakan yang PALING substansial adalah ‚Ä¶",
  o: [
    "Menunjukkan loyalitas simbolik kepada negara",
    "Menghindari kritik terhadap kebijakan pemerintah",
    "Menjalankan hak dan kewajiban warga negara secara bertanggung jawab",
    "Menolak seluruh pengaruh global",
    "Mengedepankan stabilitas di atas kebebasan"
  ],
  a: 2,
  e: "Bela negara modern menekankan tanggung jawab warga negara, bukan loyalitas simbolik.",
  c: "Bela Negara"
},
{
  q: "Netralitas ASN tidak boleh dimaknai sebagai sikap pasif karena ‚Ä¶",
  o: [
    "ASN memiliki peran strategis dalam birokrasi",
    "ASN adalah pelaksana kebijakan publik",
    "ASN berfungsi sebagai perekat persatuan bangsa",
    "ASN berada dalam struktur kekuasaan negara",
    "ASN dituntut profesional dan objektif"
  ],
  a: 2,
  e: "Fungsi perekat persatuan menuntut netralitas yang aktif dan beretika.",
  c: "Netralitas ASN"
},
{
  q: "ASN yang membiarkan praktik diskriminatif dalam pelayanan publik secara tidak langsung telah ‚Ä¶",
  o: [
    "Melanggar prinsip profesionalisme",
    "Menurunkan kualitas layanan",
    "Melemahkan persatuan dan keutuhan NKRI",
    "Mengabaikan etika jabatan",
    "Merusak citra birokrasi"
  ],
  a: 2,
  e: "Dampak paling strategis adalah melemahnya persatuan bangsa.",
  c: "Peran ASN dalam NKRI"
},
{
  q: "Hoaks bernuansa SARA berbahaya bagi NKRI terutama karena ‚Ä¶",
  o: [
    "Melanggar etika komunikasi publik",
    "Menyebabkan keresahan sosial",
    "Menciptakan polarisasi dan konflik horizontal",
    "Menurunkan kepercayaan kepada pemerintah",
    "Mengganggu stabilitas keamanan"
  ],
  a: 2,
  e: "Polarisasi dan konflik horizontal adalah ancaman langsung terhadap persatuan.",
  c: "Ancaman Sosial Budaya"
},
{
  q: "Dalam kondisi kebijakan daerah populer namun berpotensi melanggar prinsip NKRI, sikap ASN yang PALING tepat adalah ‚Ä¶",
  o: [
    "Melaksanakan kebijakan demi stabilitas daerah",
    "Menolak kebijakan secara terbuka",
    "Melakukan kajian dan koreksi melalui mekanisme konstitusional",
    "Menunda pelaksanaan sambil menunggu situasi",
    "Mengikuti aspirasi mayoritas masyarakat"
  ],
  a: 2,
  e: "ASN harus bertindak konstitusional, bukan reaktif atau populis.",
  c: "Etika Kebijakan ASN"
},
{
  q: "Penguatan NKRI di tengah globalisasi paling efektif dilakukan melalui ‚Ä¶",
  o: [
    "Penguatan kontrol negara",
    "Penyeragaman nilai budaya",
    "Internalisasi nilai Pancasila dan keadilan sosial",
    "Pembatasan arus informasi",
    "Sentralisasi kebijakan ekstrem"
  ],
  a: 2,
  e: "Ketahanan bangsa dibangun melalui nilai, bukan represi.",
  c: "Ketahanan Nasional"
}


  
];

/* ===============================
   üî¢ STATE & GAMIFIKASI
================================ */
let index = 0;
let score = 0;
let answered = false;
let kp = 0;
let level = 1;
let analytics = {};

/* ===============================
   üéÆ GAMIFICATION UI
================================ */
function updateGamification() {
  document.getElementById("kp").innerText = kp;
  document.getElementById("level").innerText = level;
}

/* ===============================
   üîÄ SHUFFLE OPSI JAWABAN
   (AMAN & TANPA RUSAK BANK SOAL)
================================ */
function shuffleQuestion(question) {
  // pasangkan opsi + status benar
  const paired = question.o.map((text, idx) => ({
    text,
    isCorrect: idx === question.a
  }));

  // Fisher‚ÄìYates shuffle
  for (let i = paired.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [paired[i], paired[j]] = [paired[j], paired[i]];
  }

  // update opsi & index jawaban benar
  question.o = paired.map(p => p.text);
  question.a = paired.findIndex(p => p.isCorrect);

  return question;
}

/* ===============================
   üìÑ LOAD SOAL (OPSINYA DIAKAC)
================================ */
let currentQuestion = null;

function loadQuestion() {
  answered = false;

  // clone soal agar bank asli tidak berubah
  currentQuestion = shuffleQuestion(
    JSON.parse(JSON.stringify(questions[index]))
  );

  document.getElementById("progress").innerText =
    `Soal ${index + 1} dari ${questions.length}`;
  document.getElementById("question").innerText = currentQuestion.q;
  document.getElementById("explanation").style.display = "none";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  currentQuestion.o.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
    btn.onclick = () => selectAnswer(i);
    optionsDiv.appendChild(btn);
  });

  // start timer hanya sekali
  if (index === 0 && !startTime) {
    startTime = new Date();
    startTimer();
  }
}

/* ===============================
   ‚úÖ PILIH JAWABAN
================================ */
function selectAnswer(i) {
  if (answered) return;
  answered = true;

  const q = currentQuestion;
  const buttons = document.querySelectorAll(".options button");

  buttons.forEach((b, idx) => {
    if (idx === q.a) b.classList.add("correct");
    if (idx === i && i !== q.a) b.classList.add("wrong");
    b.disabled = true;
  });

  if (i === q.a) {
    score += 5;
    kp += 10;
    level = Math.floor(kp / 50) + 1;
    updateGamification();
  } else {
    analytics[q.c] = (analytics[q.c] || 0) + 1;
  }

  const exp = document.getElementById("explanation");
  exp.innerText = q.e;
  exp.style.display = "block";
}

/* ===============================
   ‚ñ∂Ô∏è SOAL BERIKUTNYA
================================ */
function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishExam();
  }
}


/* ===============================
   üèÅ SELESAI UJIAN
   ANALITIK + GRAFIK + ADAPTIVE TEST
================================ */
function finishExam() {
  clearInterval(timerInterval);

  const endTime = new Date();
  const durationSec = Math.max(1, Math.floor((endTime - startTime) / 1000));
  const avgTime = durationSec / questions.length;

  const correct = score / 5;
  const wrong = questions.length - correct;
  const errorRate = wrong / questions.length;

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";

  document.getElementById("finalScore").innerText =
    `${score} / ${questions.length * 5}`;
  document.getElementById("finalKP").innerText = kp;
  document.getElementById("finalLevel").innerText = level;

  /* ===============================
     üìä GRAFIK AREA LEMAH
  ============================== */
  let graphHTML = "";
  if (Object.keys(analytics).length > 0) {
    const max = Math.max(...Object.values(analytics));
    graphHTML += `<h4>üìä Distribusi Kesalahan</h4>`;
    Object.entries(analytics).forEach(([area, count]) => {
      graphHTML += `
        <div style="margin-bottom:8px">
          <div style="font-size:13px">${area}</div>
          <div style="background:#e5e7eb;border-radius:6px">
            <div style="
              width:${(count/max)*100}%;
              background:linear-gradient(135deg,#f59e0b,#ef4444);
              color:white;
              padding:4px 8px;
              font-size:12px
            ">
              ${count} salah
            </div>
          </div>
        </div>
      `;
    });
  }

  /* ===============================
     üß† ADAPTIVE RECOMMENDATION
  ============================== */
  let focusArea = Object.keys(analytics).length
    ? Object.entries(analytics).sort((a,b)=>b[1]-a[1])[0][0]
    : "Penguatan umum";

  let adaptiveHTML = `<h4>üß† Rekomendasi Latihan Berikutnya</h4><ul>`;

  if (avgTime > 75 && errorRate > 0.3) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Ragu-ragu</li>
      <li><strong>Fokus:</strong> ${focusArea}</li>
      <li><strong>Mode:</strong> Speed Drill (10 soal)</li>
      <li><strong>Target:</strong> ‚â§ 60 detik/soal</li>
    `;
  } else if (avgTime < 45 && errorRate > 0.4) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Cepat tapi ceroboh</li>
      <li><strong>Fokus:</strong> Analisis konteks</li>
      <li><strong>Mode:</strong> HOTS Naratif</li>
      <li><strong>Target:</strong> 80‚Äì90 detik/soal</li>
    `;
  } else if (avgTime > 75 && errorRate <= 0.2) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Akurat tapi lambat</li>
      <li><strong>Fokus:</strong> Efisiensi keputusan</li>
      <li><strong>Mode:</strong> Time-bound Practice</li>
      <li><strong>Target:</strong> 55‚Äì60 detik/soal</li>
    `;
  } else {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Stabil</li>
      <li><strong>Fokus:</strong> Konsistensi</li>
      <li><strong>Mode:</strong> Mini Tryout Adaptif</li>
      <li><strong>Target:</strong> 60‚Äì70 detik/soal</li>
    `;
  }

  adaptiveHTML += `</ul>`;

  document.getElementById("scoreText").innerHTML = `
    ${graphHTML}
    <div style="margin-top:16px">
      ‚è±Ô∏è <strong>Waktu:</strong> ${Math.floor(durationSec/60)} menit ${durationSec%60} detik<br>
      ‚è≥ <strong>Rata-rata:</strong> ${Math.round(avgTime)} detik/soal
    </div>
    <div style="margin-top:16px">${adaptiveHTML}</div>
  `;

  /* ===============================
     üíæ SIMPAN RIWAYAT
  ============================== */
  const history = JSON.parse(localStorage.getItem("twkHistory")) || [];
  history.push({
    date: new Date().toLocaleString(),
    score,
    kp,
    level,
    durationSec,
    avgTime,
    analytics
  });
  localStorage.setItem("twkHistory", JSON.stringify(history));
}

/* ===============================
   üöÄ START
================================ */
loadQuestion();
</script>



</body>
</html>
