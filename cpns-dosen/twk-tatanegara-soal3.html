<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Soal TWK CPNS ‚Äì Pancasila</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: #f4f6f9;
  color: #1f2937;
}

header {
  background: linear-gradient(135deg, #1e3a8a, #2563eb);
  color: white;
  padding: 35px 20px;
  text-align: center;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 30px 20px;
}

.card {
  background: white;
  border-radius: 14px;
  padding: 30px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.progress {
  margin-bottom: 20px;
  font-weight: 600;
}

.question {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.options button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  cursor: pointer;
  transition: all 0.2s ease;
}

.options button:hover {
  background: #eef2ff;
}

.options button.correct {
  background: #dcfce7;
  border-color: #22c55e;
  font-weight: 600;
}

.options button.wrong {
  background: #fee2e2;
  border-color: #ef4444;
}

.explanation {
  margin-top: 20px;
  padding: 15px;
  background: #fef3c7;
  border-left: 5px solid #f59e0b;
  border-radius: 8px;
  display: none;
}

.controls {
  margin-top: 25px;
  text-align: right;
}

.controls button {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  background: #2563eb;
  color: white;
}

.result {
  text-align: center;
  display: none;
}

.result h2 {
  margin-bottom: 10px;
}

.timer {
  font-weight: 700;
  font-size: 16px;
  color: #dc2626;
  margin-bottom: 15px;
}

#gamification {
  margin-top: 10px;
  font-weight: 600;
  animation: pop 0.6s ease;
}

@keyframes pop {
  0% { transform: scale(0.8); }
  100% { transform: scale(1); }
}

/* ===============================
   üìä RESULT DASHBOARD
================================ */
.result {
  display: none;
}

.result-title {
  text-align: center;
  margin-bottom: 25px;
  color: #1e40af;
}

.result-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px;
  margin-bottom: 30px;
}

.summary-box {
  background: #f8fafc;
  border-radius: 12px;
  padding: 18px;
  text-align: center;
  box-shadow: inset 0 0 0 1px #e5e7eb;
}

.summary-box .label {
  display: block;
  font-size: 14px;
  color: #64748b;
  margin-bottom: 6px;
}

.summary-box .value {
  font-size: 22px;
  font-weight: 700;
  color: #0f172a;
}

.result-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
}

.result-section h3 {
  margin-bottom: 12px;
  color: #334155;
}

.result-section ul {
  padding-left: 18px;
}

.result-section li {
  margin-bottom: 8px;
  line-height: 1.6;
}

.result-actions {
  margin-top: 30px;
  text-align: center;
}

.result-actions button {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.result-actions button:hover {
  opacity: 0.9;
}


/* ===============================
   üõà TOOLTIP HASIL EVALUASI
================================ */
.tooltip-wrap {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: help;
}

.tooltip-icon {
  font-size: 13px;
  color: #2563eb;
  font-weight: 700;
}

.tooltip-content {
  position: absolute;
  bottom: 130%;
  left: 50%;
  transform: translateX(-50%);
  width: 220px;
  background: #0f172a;
  color: #f8fafc;
  padding: 10px 12px;
  border-radius: 10px;
  font-size: 12px;
  line-height: 1.5;
  opacity: 0;
  visibility: hidden;
  transition: all 0.25s ease;
  z-index: 20;
  box-shadow: 0 12px 30px rgba(0,0,0,.25);
}

.tooltip-content::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px;
  border-style: solid;
  border-color: #0f172a transparent transparent transparent;
}

.tooltip-wrap:hover .tooltip-content {
  opacity: 1;
  visibility: visible;
}


</style>
</head>

<body>

<header>
  <h1>Latihan Soal TWK CPNS</h1>
  <p>Sejarah & Sistem Ketatanegaraan ¬∑ Standar CPNS</p>
<div id="gamification">
  ‚≠ê KP: <span id="kp">0</span> |
  üéñÔ∏è Level: <span id="level">1</span>
</div>

</header>

<div class="container">
  <div class="card" id="quiz">
    <div class="timer" id="timer">
  ‚è±Ô∏è Sisa Waktu: <span id="time">20:00</span>
</div>

    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div class="explanation" id="explanation"></div>

    <div class="controls">
      <button onclick="nextQuestion()">Soal Berikutnya</button>
    </div>
  </div>

<div class="card result" id="result">

  <h2 class="result-title">üìä Hasil Evaluasi Latihan TWK</h2>

  <!-- RINGKASAN NILAI -->
  <div class="result-summary">

  <!-- SKOR -->
  <div class="summary-box">
    <span class="label tooltip-wrap">
      Skor
      <span class="tooltip-icon">‚ìò</span>
      <span class="tooltip-content">
        Total nilai yang diperoleh dari jawaban benar.
        Digunakan untuk mengukur tingkat penguasaan materi secara kuantitatif.
      </span>
    </span>
    <span class="value" id="finalScore">‚Äì</span>
  </div>

  <!-- KNOWLEDGE POINT -->
  <div class="summary-box">
    <span class="label tooltip-wrap">
      Knowledge Point
      <span class="tooltip-icon">‚ìò</span>
      <span class="tooltip-content">
        Poin pembelajaran yang mencerminkan akumulasi pemahaman
        dan konsistensi menjawab soal dengan benar.
      </span>
    </span>
    <span class="value" id="finalKP">‚Äì</span>
  </div>

  <!-- LEVEL -->
  <div class="summary-box">
    <span class="label tooltip-wrap">
      Level
      <span class="tooltip-icon">‚ìò</span>
      <span class="tooltip-content">
        Indikator kesiapan peserta berdasarkan Knowledge Point:<br>
        ‚Ä¢ Level 1: Kesiapan rendah<br>
        ‚Ä¢ Level 2: Dasar<br>
        ‚Ä¢ Level 3: Cukup<br>
        ‚Ä¢ Level 4: Baik<br>
        ‚Ä¢ Level 5: Tinggi
      </span>
    </span>
    <span class="value" id="finalLevel">‚Äì</span>
  </div>

</div>


  <!-- ANALITIK -->
  <div class="result-section">
    <h3>üìå Analisis Area TWK</h3>
    <div id="scoreText"></div>
  </div>

  <!-- CTA -->
  <div class="result-actions">
    <button onclick="location.reload()">üîÅ Ulangi Latihan</button>
  </div>

</div>


<script>
/* ===============================
   ‚è±Ô∏è TIMER BKN
================================ */
let totalTime = 20 * 60;
let timerInterval;
let startTime = null;

function startTimer() {
  if (timerInterval) return;

  timerInterval = setInterval(() => {
    totalTime--;

    const min = Math.floor(totalTime / 60);
    const sec = totalTime % 60;
    document.getElementById("time").innerText =
      `${min}:${sec.toString().padStart(2, "0")}`;

    if (totalTime <= 0) {
      clearInterval(timerInterval);
      finishExam();
    }
  }, 1000);
}

/* ===============================
   üìò BANK SOAL (20 SOAL FIX)
================================ */
const questions = [
  /* === ISI BANK SOAL 1‚Äì20 (TETAP SEPERTI SEBELUMNYA) === */
  
/* =================================================
   üìò BANK SOAL TWK (BKN TRAP + HOTS ADVANCE)
   SISTEM KETATANEGARAAN INDONESIA (20 SOAL)
================================================= */

/* ===== LEVEL ANALISIS KONSEP (1‚Äì6)
   JEBakan DEFINISI vs PRAKTIK
================================ */

{
  q: "Pernyataan yang PALING TEPAT menggambarkan sistem ketatanegaraan Indonesia adalah ‚Ä¶",
  o: [
    "Seluruh kewenangan negara diatur secara rinci dalam undang-undang",
    "Keseluruhan prinsip, aturan, dan praktik penyelenggaraan kekuasaan negara",
    "Hubungan antara Presiden dan DPR dalam menjalankan pemerintahan",
    "Pelaksanaan kekuasaan eksekutif oleh Presiden",
    "Sistem pemerintahan yang dianut suatu negara"
  ],
  a: 1,
  e: "Sistem ketatanegaraan mencakup aturan konstitusional dan praktik penyelenggaraan kekuasaan negara.",
  c: "Konsep Ketatanegaraan"
},
{
  q: "Sistem ketatanegaraan Indonesia bersifat dinamis, artinya ‚Ä¶",
  o: [
    "Dapat berubah mengikuti kehendak penguasa",
    "Dapat diubah tanpa batas melalui kebijakan politik",
    "Berkembang sesuai dinamika masyarakat tanpa meninggalkan nilai dasar negara",
    "Dapat diubah oleh Presiden melalui peraturan pemerintah",
    "Selalu berubah setiap pergantian rezim"
  ],
  a: 2,
  e: "Dinamis berarti berkembang, bukan berubah bebas tanpa prinsip.",
  c: "Sifat Dinamis Konstitusi"
},
{
  q: "Dalam negara hukum, tindakan lembaga negara dinyatakan sah apabila ‚Ä¶",
  o: [
    "Didukung mayoritas politik",
    "Dilakukan oleh pejabat tinggi negara",
    "Berdasarkan hukum dan kewenangan konstitusional",
    "Bertujuan menjaga stabilitas nasional",
    "Memberi manfaat langsung bagi masyarakat"
  ],
  a: 2,
  e: "Legalitas tindakan negara harus berdasar hukum dan konstitusi.",
  c: "Negara Hukum"
},
{
  q: "Perbedaan utama sistem ketatanegaraan dan sistem pemerintahan terletak pada ‚Ä¶",
  o: [
    "Bentuk negara",
    "Objek pengaturan kekuasaan",
    "Jumlah lembaga negara",
    "Cara pengisian jabatan",
    "Hubungan pusat dan daerah"
  ],
  a: 1,
  e: "Sistem ketatanegaraan memiliki ruang lingkup lebih luas.",
  c: "Konsep Dasar"
},
{
  q: "Apabila suatu praktik pemerintahan tidak diatur secara eksplisit dalam UUD 1945, maka praktik tersebut ‚Ä¶",
  o: [
    "Otomatis melanggar konstitusi",
    "Dilarang dalam negara hukum",
    "Dapat dilakukan sepanjang tidak bertentangan dengan UUD",
    "Harus mendapat persetujuan MPR",
    "Tidak memiliki kekuatan hukum"
  ],
  a: 2,
  e: "Konstitusi membuka ruang praktik ketatanegaraan yang tidak bertentangan.",
  c: "Praktik Ketatanegaraan"
},
{
  q: "Tujuan utama perubahan sistem ketatanegaraan Indonesia adalah ‚Ä¶",
  o: [
    "Mengganti dasar negara",
    "Mengubah bentuk negara",
    "Menyempurnakan mekanisme penyelenggaraan kekuasaan",
    "Mengurangi peran lembaga negara",
    "Memperkuat kekuasaan eksekutif"
  ],
  a: 2,
  e: "Perubahan bertujuan menyempurnakan sistem sesuai konstitusi.",
  c: "Tujuan Reformasi"
},

/* ===== LEVEL PERIODISASI (7‚Äì13)
   JEBakan SEJARAH & SISTEM
================================ */

{
  q: "Ciri ketatanegaraan Orde Lama yang PALING menunjukkan penyimpangan demokrasi adalah ‚Ä¶",
  o: [
    "Pergantian konstitusi",
    "Eksperimen sistem pemerintahan",
    "Dominasi Presiden dalam Demokrasi Terpimpin",
    "Peran partai politik yang kuat",
    "Kondisi ekonomi yang lemah"
  ],
  a: 2,
  e: "Demokrasi Terpimpin melemahkan checks and balances.",
  c: "Orde Lama"
},
{
  q: "Pada masa berlakunya UUD Sementara 1950, ketidakstabilan politik terutama disebabkan oleh ‚Ä¶",
  o: [
    "Presiden terlalu dominan",
    "Pertanggungjawaban kabinet kepada parlemen",
    "Lemahnya peran partai politik",
    "Sentralisasi kekuasaan",
    "Pemilu yang tidak demokratis"
  ],
  a: 1,
  e: "Sistem parlementer menyebabkan kabinet mudah jatuh.",
  c: "UUDS 1950"
},
{
  q: "Secara konstitusional Orde Baru menganut sistem presidensial, namun dalam praktiknya ditandai oleh ‚Ä¶",
  o: [
    "Checks and balances kuat",
    "Peran DPR efektif",
    "Dominasi kekuasaan eksekutif",
    "Kemandirian yudikatif",
    "Otonomi daerah luas"
  ],
  a: 2,
  e: "Presidensial kuat tanpa pengawasan efektif.",
  c: "Orde Baru"
},
{
  q: "Perubahan paling fundamental pasca amandemen UUD 1945 adalah ‚Ä¶",
  o: [
    "Penghapusan DPR",
    "Penguatan MPR sebagai lembaga tertinggi",
    "Dihapuskannya konsep lembaga tertinggi negara",
    "Penghapusan kekuasaan Presiden",
    "Perubahan bentuk negara"
  ],
  a: 2,
  e: "Setelah amandemen, tidak ada lembaga tertinggi negara.",
  c: "Reformasi Ketatanegaraan"
},
{
  q: "Pernyataan yang BENAR terkait MPR setelah amandemen UUD 1945 adalah ‚Ä¶",
  o: [
    "Pemegang kedaulatan rakyat sepenuhnya",
    "Lembaga tertinggi negara",
    "Lembaga negara setara dengan kewenangan terbatas",
    "Pengawas langsung Presiden",
    "Penentu kebijakan nasional"
  ],
  a: 2,
  e: "MPR tidak lagi berkedudukan tertinggi.",
  c: "MPR Pasca Amandemen"
},
{
  q: "Salah satu indikator kuatnya sistem presidensial pasca Reformasi adalah ‚Ä¶",
  o: [
    "Presiden bertanggung jawab kepada MPR",
    "Presiden dipilih DPR",
    "Presiden dipilih langsung oleh rakyat",
    "Presiden dapat membubarkan DPR",
    "Presiden tanpa batas masa jabatan"
  ],
  a: 2,
  e: "Pemilihan langsung mempertegas sistem presidensial.",
  c: "Sistem Presidensial"
},
{
  q: "Instabilitas politik awal kemerdekaan terutama disebabkan oleh ‚Ä¶",
  o: [
    "Pemilu langsung",
    "Sentralisasi kekuasaan",
    "Ketidakkonsistenan sistem pemerintahan",
    "Pengawasan DPR yang kuat",
    "Kemandirian yudikatif"
  ],
  a: 2,
  e: "Peralihan sistem menyebabkan instabilitas.",
  c: "Awal Kemerdekaan"
},

/* ===== LEVEL HOTS EKSTREM (14‚Äì20)
   JEBakan KEWENANGAN & KASUS
================================ */

{
  q: "Jika DPR dan Presiden menyepakati undang-undang yang bertentangan dengan UUD 1945, maka mekanisme koreksi dilakukan oleh ‚Ä¶",
  o: [
    "Mahkamah Agung",
    "Komisi Yudisial",
    "Mahkamah Konstitusi",
    "MPR",
    "DPR periode berikutnya"
  ],
  a: 2,
  e: "MK berperan sebagai guardian of the constitution.",
  c: "Checks and Balances"
},
{
  q: "Kondisi yang PALING menunjukkan kegagalan prinsip checks and balances adalah ‚Ä¶",
  o: [
    "Perbedaan pendapat antar lembaga",
    "Lembaga saling mengawasi",
    "Satu lembaga memonopoli kekuasaan",
    "Adanya judicial review",
    "Penggunaan hak angket DPR"
  ],
  a: 2,
  e: "Monopoli kekuasaan menandakan kegagalan checks and balances.",
  c: "Checks and Balances"
},
{
  q: "Kewenangan Komisi Yudisial yang BENAR adalah ‚Ä¶",
  o: [
    "Menguji undang-undang",
    "Menjatuhkan putusan pengadilan",
    "Mengawasi perilaku hakim",
    "Mengadili sengketa pemilu",
    "Mengangkat hakim konstitusi"
  ],
  a: 2,
  e: "KY menjaga kehormatan dan perilaku hakim.",
  c: "Komisi Yudisial"
},
{
  q: "Perbedaan kewenangan MA dan MK yang PALING tepat adalah ‚Ä¶",
  o: [
    "MA menguji UU, MK mengadili perkara pidana",
    "MA menguji UU terhadap UUD, MK menguji peraturan",
    "MA menguji peraturan di bawah UU, MK menguji UU terhadap UUD",
    "MA dan MK memiliki kewenangan yang sama",
    "MK berada di bawah MA"
  ],
  a: 2,
  e: "Ini jebakan klasik BKN tentang kewenangan yudisial.",
  c: "MA vs MK"
},
{
  q: "Legitimasi utama kekuasaan Presiden pasca amandemen UUD 1945 berasal dari ‚Ä¶",
  o: [
    "MPR",
    "DPR",
    "Rakyat melalui pemilu",
    "Partai politik",
    "Lembaga peradilan"
  ],
  a: 2,
  e: "Presiden dipilih langsung oleh rakyat.",
  c: "Kedaulatan Rakyat"
},
{
  q: "Jika suatu lembaga negara menjalankan kewenangan tanpa dasar konstitusional, maka tindakan tersebut ‚Ä¶",
  o: [
    "Sah demi kepentingan umum",
    "Dibenarkan secara politik",
    "Bertentangan dengan prinsip negara hukum",
    "Menjadi diskresi pejabat",
    "Menjadi praktik ketatanegaraan"
  ],
  a: 2,
  e: "Negara hukum menolak kewenangan tanpa dasar konstitusi.",
  c: "Negara Hukum"
},
{
  q: "Peran ASN dalam menjaga sistem ketatanegaraan demokratis PALING tepat diwujudkan melalui ‚Ä¶",
  o: [
    "Loyalitas kepada pimpinan",
    "Keberpihakan politik",
    "Netralitas dan kepatuhan pada konstitusi",
    "Stabilitas kekuasaan",
    "Kepentingan golongan"
  ],
  a: 2,
  e: "ASN wajib netral dan konstitusional.",
  c: "ASN & Ketatanegaraan"
}


  
];

/* ===============================
   üî¢ STATE & GAMIFIKASI
================================ */
let index = 0;
let score = 0;
let answered = false;
let kp = 0;
let level = 1;
let analytics = {};

/* ===============================
   üéÆ GAMIFICATION UI
================================ */
function updateGamification() {
  document.getElementById("kp").innerText = kp;
  document.getElementById("level").innerText = level;
}

/* ===============================
   üîÄ SHUFFLE OPSI JAWABAN
   (AMAN & TANPA RUSAK BANK SOAL)
================================ */
function shuffleQuestion(question) {
  // pasangkan opsi + status benar
  const paired = question.o.map((text, idx) => ({
    text,
    isCorrect: idx === question.a
  }));

  // Fisher‚ÄìYates shuffle
  for (let i = paired.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [paired[i], paired[j]] = [paired[j], paired[i]];
  }

  // update opsi & index jawaban benar
  question.o = paired.map(p => p.text);
  question.a = paired.findIndex(p => p.isCorrect);

  return question;
}

/* ===============================
   üìÑ LOAD SOAL (OPSINYA DIAKAC)
================================ */
let currentQuestion = null;

function loadQuestion() {
  answered = false;

  // clone soal agar bank asli tidak berubah
  currentQuestion = shuffleQuestion(
    JSON.parse(JSON.stringify(questions[index]))
  );

  document.getElementById("progress").innerText =
    `Soal ${index + 1} dari ${questions.length}`;
  document.getElementById("question").innerText = currentQuestion.q;
  document.getElementById("explanation").style.display = "none";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  currentQuestion.o.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
    btn.onclick = () => selectAnswer(i);
    optionsDiv.appendChild(btn);
  });

  // start timer hanya sekali
  if (index === 0 && !startTime) {
    startTime = new Date();
    startTimer();
  }
}

/* ===============================
   ‚úÖ PILIH JAWABAN
================================ */
function selectAnswer(i) {
  if (answered) return;
  answered = true;

  const q = currentQuestion;
  const buttons = document.querySelectorAll(".options button");

  buttons.forEach((b, idx) => {
    if (idx === q.a) b.classList.add("correct");
    if (idx === i && i !== q.a) b.classList.add("wrong");
    b.disabled = true;
  });

  if (i === q.a) {
    score += 5;
    kp += 10;
    level = Math.floor(kp / 50) + 1;
    updateGamification();
  } else {
    analytics[q.c] = (analytics[q.c] || 0) + 1;
  }

  const exp = document.getElementById("explanation");
  exp.innerText = q.e;
  exp.style.display = "block";
}

/* ===============================
   ‚ñ∂Ô∏è SOAL BERIKUTNYA
================================ */
function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishExam();
  }
}


/* ===============================
   üèÅ SELESAI UJIAN
   ANALITIK + GRAFIK + ADAPTIVE TEST
================================ */
function finishExam() {
  clearInterval(timerInterval);

  const endTime = new Date();
  const durationSec = Math.max(1, Math.floor((endTime - startTime) / 1000));
  const avgTime = durationSec / questions.length;

  const correct = score / 5;
  const wrong = questions.length - correct;
  const errorRate = wrong / questions.length;

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";

  document.getElementById("finalScore").innerText =
    `${score} / ${questions.length * 5}`;
  document.getElementById("finalKP").innerText = kp;
  document.getElementById("finalLevel").innerText = level;

  /* ===============================
     üìä GRAFIK AREA LEMAH
  ============================== */
  let graphHTML = "";
  if (Object.keys(analytics).length > 0) {
    const max = Math.max(...Object.values(analytics));
    graphHTML += `<h4>üìä Distribusi Kesalahan</h4>`;
    Object.entries(analytics).forEach(([area, count]) => {
      graphHTML += `
        <div style="margin-bottom:8px">
          <div style="font-size:13px">${area}</div>
          <div style="background:#e5e7eb;border-radius:6px">
            <div style="
              width:${(count/max)*100}%;
              background:linear-gradient(135deg,#f59e0b,#ef4444);
              color:white;
              padding:4px 8px;
              font-size:12px
            ">
              ${count} salah
            </div>
          </div>
        </div>
      `;
    });
  }

  /* ===============================
     üß† ADAPTIVE RECOMMENDATION
  ============================== */
  let focusArea = Object.keys(analytics).length
    ? Object.entries(analytics).sort((a,b)=>b[1]-a[1])[0][0]
    : "Penguatan umum";

  let adaptiveHTML = `<h4>üß† Rekomendasi Latihan Berikutnya</h4><ul>`;

  if (avgTime > 75 && errorRate > 0.3) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Ragu-ragu</li>
      <li><strong>Fokus:</strong> ${focusArea}</li>
      <li><strong>Mode:</strong> Speed Drill (10 soal)</li>
      <li><strong>Target:</strong> ‚â§ 60 detik/soal</li>
    `;
  } else if (avgTime < 45 && errorRate > 0.4) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Cepat tapi ceroboh</li>
      <li><strong>Fokus:</strong> Analisis konteks</li>
      <li><strong>Mode:</strong> HOTS Naratif</li>
      <li><strong>Target:</strong> 80‚Äì90 detik/soal</li>
    `;
  } else if (avgTime > 75 && errorRate <= 0.2) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Akurat tapi lambat</li>
      <li><strong>Fokus:</strong> Efisiensi keputusan</li>
      <li><strong>Mode:</strong> Time-bound Practice</li>
      <li><strong>Target:</strong> 55‚Äì60 detik/soal</li>
    `;
  } else {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Stabil</li>
      <li><strong>Fokus:</strong> Konsistensi</li>
      <li><strong>Mode:</strong> Mini Tryout Adaptif</li>
      <li><strong>Target:</strong> 60‚Äì70 detik/soal</li>
    `;
  }

  adaptiveHTML += `</ul>`;

  document.getElementById("scoreText").innerHTML = `
    ${graphHTML}
    <div style="margin-top:16px">
      ‚è±Ô∏è <strong>Waktu:</strong> ${Math.floor(durationSec/60)} menit ${durationSec%60} detik<br>
      ‚è≥ <strong>Rata-rata:</strong> ${Math.round(avgTime)} detik/soal
    </div>
    <div style="margin-top:16px">${adaptiveHTML}</div>
  `;

  /* ===============================
     üíæ SIMPAN RIWAYAT
  ============================== */
  const history = JSON.parse(localStorage.getItem("twkHistory")) || [];
  history.push({
    date: new Date().toLocaleString(),
    score,
    kp,
    level,
    durationSec,
    avgTime,
    analytics
  });
  localStorage.setItem("twkHistory", JSON.stringify(history));
}

/* ===============================
   üöÄ START
================================ */
loadQuestion();
</script>



</body>
</html>
