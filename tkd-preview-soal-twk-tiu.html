<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Latihan Soal TWK CPNS ‚Äì Pancasila</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Inter', sans-serif;
  background: #f4f6f9;
  color: #1f2937;
}

header {
  background: linear-gradient(135deg, #1e3a8a, #2563eb);
  color: white;
  padding: 35px 20px;
  text-align: center;
}

.container {
  max-width: 900px;
  margin: auto;
  padding: 30px 20px;
}

.card {
  background: white;
  border-radius: 14px;
  padding: 30px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.progress {
  margin-bottom: 20px;
  font-weight: 600;
}

.question {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: 20px;
}

.options button {
  display: block;
  width: 100%;
  text-align: left;
  padding: 12px 16px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  cursor: pointer;
  transition: all 0.2s ease;
}

.options button:hover {
  background: #eef2ff;
}

.options button.correct {
  background: #dcfce7;
  border-color: #22c55e;
  font-weight: 600;
}

.options button.wrong {
  background: #fee2e2;
  border-color: #ef4444;
}

.explanation {
  margin-top: 20px;
  padding: 15px;
  background: #fef3c7;
  border-left: 5px solid #f59e0b;
  border-radius: 8px;
  display: none;
}

.controls {
  margin-top: 25px;
  text-align: right;
}

.controls button {
  padding: 10px 18px;
  border: none;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  background: #2563eb;
  color: white;
}

.result {
  text-align: center;
  display: none;
}

.result h2 {
  margin-bottom: 10px;
}

.timer {
  font-weight: 700;
  font-size: 16px;
  color: #dc2626;
  margin-bottom: 15px;
}

#gamification {
  margin-top: 10px;
  font-weight: 600;
  animation: pop 0.6s ease;
}

@keyframes pop {
  0% { transform: scale(0.8); }
  100% { transform: scale(1); }
}

/* ===============================
   üìä RESULT DASHBOARD
================================ */
.result {
  display: none;
}

.result-title {
  text-align: center;
  margin-bottom: 25px;
  color: #1e40af;
}

.result-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 15px;
  margin-bottom: 30px;
}

.summary-box {
  background: #f8fafc;
  border-radius: 12px;
  padding: 18px;
  text-align: center;
  box-shadow: inset 0 0 0 1px #e5e7eb;
}

.summary-box .label {
  display: block;
  font-size: 14px;
  color: #64748b;
  margin-bottom: 6px;
}

.summary-box .value {
  font-size: 22px;
  font-weight: 700;
  color: #0f172a;
}

.result-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
}

.result-section h3 {
  margin-bottom: 12px;
  color: #334155;
}

.result-section ul {
  padding-left: 18px;
}

.result-section li {
  margin-bottom: 8px;
  line-height: 1.6;
}

.result-actions {
  margin-top: 30px;
  text-align: center;
}

.result-actions button {
  background: linear-gradient(135deg, #2563eb, #1e40af);
  color: white;
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
}

.result-actions button:hover {
  opacity: 0.9;
}

/* ===============================
   üõà TOOLTIP HASIL EVALUASI
================================ */
.tooltip-wrap {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  cursor: help;
}

.tooltip-icon {
  font-size: 13px;
  color: #2563eb;
  font-weight: 700;
}

.tooltip-content {
  position: absolute;
  bottom: 130%;
  left: 50%;
  transform: translateX(-50%);
  width: 220px;
  background: #0f172a;
  color: #f8fafc;
  padding: 10px 12px;
  border-radius: 10px;
  font-size: 12px;
  line-height: 1.5;
  opacity: 0;
  visibility: hidden;
  transition: all 0.25s ease;
  z-index: 20;
  box-shadow: 0 12px 30px rgba(0,0,0,.25);
}

.tooltip-content::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px;
  border-style: solid;
  border-color: #0f172a transparent transparent transparent;
}

.tooltip-wrap:hover .tooltip-content {
  opacity: 1;
  visibility: visible;
}


</style>
</head>

<body>

<header>
  <h1>Latihan Soal CPNS</h1>
  <p>Contoh Paket Soal ¬∑ Standar CPNS</p>
<div id="gamification">
  ‚≠ê KP: <span id="kp">0</span> |
  üéñÔ∏è Level: <span id="level">1</span>
</div>

</header>

<div class="container">
  <div class="card" id="quiz">
    <div class="timer" id="timer">
  ‚è±Ô∏è Sisa Waktu: <span id="time">20:00</span>
</div>

    <div class="progress" id="progress"></div>
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <div class="explanation" id="explanation"></div>

    <div class="controls">
      <button onclick="nextQuestion()">Soal Berikutnya</button>
    </div>
  </div>

<div class="card result" id="result">

  <h2 class="result-title">üìä Hasil Evaluasi Latihan Soal</h2>

  <!-- RINGKASAN NILAI -->
  <div class="result-summary">

  <!-- SKOR -->
  <div class="summary-box">
    <span class="label tooltip-wrap">
      Skor
      <span class="tooltip-icon">‚ìò</span>
      <span class="tooltip-content">
        Total nilai yang diperoleh dari jawaban benar.
        Digunakan untuk mengukur tingkat penguasaan materi secara kuantitatif.
      </span>
    </span>
    <span class="value" id="finalScore">‚Äì</span>
  </div>

  <!-- KNOWLEDGE POINT -->
  <div class="summary-box">
    <span class="label tooltip-wrap">
      Knowledge Point
      <span class="tooltip-icon">‚ìò</span>
      <span class="tooltip-content">
        Poin pembelajaran yang mencerminkan akumulasi pemahaman
        dan konsistensi menjawab soal dengan benar.
      </span>
    </span>
    <span class="value" id="finalKP">‚Äì</span>
  </div>

  <!-- LEVEL -->
  <div class="summary-box">
    <span class="label tooltip-wrap">
      Level
      <span class="tooltip-icon">‚ìò</span>
      <span class="tooltip-content">
        Indikator kesiapan peserta berdasarkan Knowledge Point:<br>
        ‚Ä¢ Level 1: Kesiapan rendah<br>
        ‚Ä¢ Level 2: Dasar<br>
        ‚Ä¢ Level 3: Cukup<br>
        ‚Ä¢ Level 4: Baik<br>
        ‚Ä¢ Level 5: Tinggi
      </span>
    </span>
    <span class="value" id="finalLevel">‚Äì</span>
  </div>

</div>


  <!-- ANALITIK -->
  <div class="result-section">
    <h3>üìå Analisis Area Tes</h3>
    <div id="scoreText"></div>
  </div>

  <!-- CTA -->
  <div class="result-actions">
    <button onclick="location.reload()">üîÅ Ulangi Latihan</button>
  </div>

</div>


<script>
/* ===============================
   ‚è±Ô∏è TIMER BKN
================================ */
let totalTime = 20 * 60;
let timerInterval;
let startTime = null;

function startTimer() {
  if (timerInterval) return;

  timerInterval = setInterval(() => {
    totalTime--;

    const min = Math.floor(totalTime / 60);
    const sec = totalTime % 60;
    document.getElementById("time").innerText =
      `${min}:${sec.toString().padStart(2, "0")}`;

    if (totalTime <= 0) {
      clearInterval(timerInterval);
      finishExam();
    }
  }, 1000);
}

/* ===============================
   üìò BANK SOAL (20 SOAL FIX)
================================ */
const questions = [
  /* === ISI BANK SOAL 1‚Äì20 (TETAP SEPERTI SEBELUMNYA) === */
  
/* =================================================
   üìò BANK SOAL TWK
   PANCASILA (20 SOAL)
================================================= */

/* ===== LEVEL RINGAN (1‚Äì6)
   PEMAHAMAN KONSEP & NILAI DASAR
================================ */

{
  q: "Pancasila sebagai dasar negara berarti bahwa Pancasila berfungsi sebagai ‚Ä¶",
  o: [
    "Pedoman moral individu semata",
    "Sumber dari segala sumber hukum",
    "Alat politik pemerintah",
    "Ideologi tertutup negara",
    "Dokumen sejarah"
  ],
  a: 1,
  e: "Sebagai dasar negara, Pancasila menjadi sumber dari segala sumber hukum.",
  c: "Kedudukan Pancasila"
},
{
  q: "Nilai Ketuhanan Yang Maha Esa menegaskan bahwa negara ‚Ä¶",
  o: [
    "Mewajibkan satu agama",
    "Menjamin kebebasan beragama",
    "Melarang keyakinan tertentu",
    "Mengatur tata cara ibadah",
    "Mengutamakan mayoritas agama"
  ],
  a: 1,
  e: "Negara menjamin kebebasan beragama tanpa pemaksaan.",
  c: "Sila Pertama Pancasila"
},
{
  q: "Sikap yang mencerminkan sila Kemanusiaan yang Adil dan Beradab adalah ‚Ä¶",
  o: [
    "Mendiskriminasi kelompok tertentu",
    "Menghormati martabat setiap manusia",
    "Mengutamakan kepentingan golongan",
    "Mengabaikan hak minoritas",
    "Menyeragamkan perlakuan tanpa keadilan"
  ],
  a: 1,
  e: "Sila kedua menekankan penghormatan terhadap harkat dan martabat manusia.",
  c: "Sila Kedua Pancasila"
},
{
  q: "Persatuan Indonesia mengandung makna bahwa ‚Ä¶",
  o: [
    "Kepentingan daerah dihapus",
    "Identitas budaya dilarang",
    "Kepentingan bangsa diutamakan",
    "Perbedaan dianggap ancaman",
    "Mayoritas menentukan segalanya"
  ],
  a: 2,
  e: "Persatuan menempatkan kepentingan nasional di atas kepentingan golongan.",
  c: "Sila Ketiga Pancasila"
},
{
  q: "Musyawarah untuk mufakat mencerminkan sila ‚Ä¶",
  o: [
    "Ketuhanan",
    "Kemanusiaan",
    "Persatuan",
    "Kerakyatan",
    "Keadilan sosial"
  ],
  a: 3,
  e: "Musyawarah merupakan ciri utama sila keempat.",
  c: "Sila Keempat Pancasila"
},
{
  q: "Tujuan utama keadilan sosial menurut Pancasila adalah ‚Ä¶",
  o: [
    "Kesamaan hasil bagi semua",
    "Pemerataan kesejahteraan",
    "Keuntungan bagi negara",
    "Dominasi kelompok tertentu",
    "Kebebasan ekonomi penuh"
  ],
  a: 1,
  e: "Keadilan sosial bertujuan mewujudkan kesejahteraan yang merata.",
  c: "Sila Kelima Pancasila"
},

/* ===== LEVEL MENENGAH (7‚Äì13)
   IMPLEMENTASI DALAM KEHIDUPAN & ASN
================================ */

{
  q: "ASN yang melayani masyarakat tanpa membedakan latar belakang mencerminkan nilai ‚Ä¶",
  o: [
    "Ketuhanan",
    "Kemanusiaan dan keadilan",
    "Persatuan semu",
    "Demokrasi formal",
    "Kepatuhan administratif"
  ],
  a: 1,
  e: "Pelayanan tanpa diskriminasi mencerminkan nilai kemanusiaan dan keadilan.",
  c: "Implementasi Pancasila oleh ASN"
},
{
  q: "Pancasila disebut ideologi terbuka karena ‚Ä¶",
  o: [
    "Dapat diubah sesuka hati",
    "Bersifat kaku dan mutlak",
    "Mampu menyesuaikan perkembangan zaman",
    "Mengikuti ideologi global",
    "Tidak memiliki nilai dasar"
  ],
  a: 2,
  e: "Ideologi terbuka bersifat dinamis tanpa meninggalkan nilai dasar.",
  c: "Pancasila sebagai Ideologi Terbuka"
},

/* ===== LEVEL TINGGI / HOTS (14‚Äì20)
   ANALISIS KASUS & KEBIJAKAN
================================ */

{
  q: "Kebijakan publik yang paling sesuai dengan Pancasila adalah kebijakan yang ‚Ä¶",
  o: [
    "Menguntungkan mayoritas",
    "Netral tetapi diskriminatif",
    "Menjaga keadilan dan persatuan",
    "Berorientasi ekonomi semata",
    "Berbasis tekanan politik"
  ],
  a: 2,
  e: "Kebijakan publik harus berlandaskan nilai keadilan dan persatuan.",
  c: "Pancasila dalam Kebijakan Publik"
},

/* =================================================
   üß† TIU ‚Äì LOGIKA VERBAL
================================================= */

{
  q: "ASN : Pelayanan = Guru : ‚Ä¶",
  o: [
    "Sekolah",
    "Ilmu",
    "Mengajar",
    "Murid",
    "Pendidikan"
  ],
  a: 2,
  e: "ASN memberikan pelayanan, guru melakukan aktivitas mengajar.",
  c: "Analogi Verbal"
},
{
  q: "Semua ASN wajib netral. Budi adalah ASN. Kesimpulan yang tepat adalah ‚Ä¶",
  o: [
    "Budi boleh berpihak",
    "Budi tidak netral",
    "Budi wajib netral",
    "Budi bebas memilih",
    "Tidak dapat disimpulkan"
  ],
  a: 2,
  e: "Kesimpulan langsung dari silogisme.",
  c: "Silogisme"
},

/* =================================================
   üî¢ TIU ‚Äì LOGIKA NUMERIK
================================================= */

{
  q: "Deret berikut: 2, 4, 8, 16, ‚Ä¶ Angka berikutnya adalah ‚Ä¶",
  o: ["18", "20", "24", "32", "30"],
  a: 3,
  e: "Pola dikali 2.",
  c: "Deret Angka"
},
{
  q: "20% dari 250 adalah ‚Ä¶",
  o: ["25", "40", "50", "60", "75"],
  a: 2,
  e: "20% √ó 250 = 50.",
  c: "Persentase"
},

/* =================================================
   üß© TIU ‚Äì PENALARAN LOGIS
================================================= */

{
  q: "Jika semua A adalah B dan semua B adalah C, maka ‚Ä¶",
  o: [
    "Semua C adalah A",
    "Sebagian A adalah C",
    "Semua A adalah C",
    "Sebagian C adalah B",
    "Tidak dapat disimpulkan"
  ],
  a: 2,
  e: "Sifat transitif: A ‚Üí B ‚Üí C.",
  c: "Penalaran Logis"
},
{
  q: "Jika hari ini hujan, maka jalanan basah. Jalanan tidak basah. Kesimpulan yang tepat adalah ‚Ä¶",
  o: [
    "Hari ini hujan",
    "Hari ini tidak hujan",
    "Jalanan licin",
    "Cuaca cerah",
    "Tidak ada kesimpulan"
  ],
  a: 1,
  e: "Modus tollens: jika P maka Q, tidak Q ‚Üí tidak P.",
  c: "Logika Deduktif"
},

/* =================================================
   üß† TIU ‚Äì LOGIKA PENALARAN KOMPLEKS
================================================= */

{
  q: "Di sebuah instansi terdapat lima pegawai: Andi, Budi, Citra, Dedi, dan Eka. Andi tidak boleh satu tim dengan Dedi. Budi harus satu tim dengan Citra. Eka tidak boleh satu tim dengan Citra. Jika setiap tim terdiri dari dua orang dan satu orang menjadi cadangan, maka pasangan tim yang mungkin adalah ‚Ä¶",
  o: [
    "Andi‚ÄìBudi dan Citra‚ÄìDedi",
    "Andi‚ÄìEka dan Budi‚ÄìCitra",
    "Andi‚ÄìCitra dan Budi‚ÄìDedi",
    "Budi‚ÄìEka dan Citra‚ÄìDedi",
    "Andi‚ÄìDedi dan Budi‚ÄìCitra"
  ],
  a: 1,
  e: "Budi wajib dengan Citra, Andi tidak boleh dengan Dedi, dan Eka tidak boleh dengan Citra. Kombinasi yang memenuhi semua syarat adalah Andi‚ÄìEka dan Budi‚ÄìCitra.",
  c: "Penalaran Analitis ‚Äì Penempatan"
},
{
  q: "Dalam sebuah seleksi internal terdapat aturan sebagai berikut: Jika peserta lulus tahap administrasi, maka ia boleh mengikuti tahap wawancara. Jika peserta mengikuti wawancara, maka ia harus mengikuti tes integritas. Dani tidak mengikuti tes integritas. Kesimpulan yang paling tepat adalah ‚Ä¶",
  o: [
    "Dani tidak lulus administrasi",
    "Dani tidak mengikuti wawancara",
    "Dani gagal di semua tahap",
    "Dani mengikuti wawancara tetapi tidak lulus",
    "Tidak dapat disimpulkan"
  ],
  a: 1,
  e: "Jika mengikuti wawancara maka harus tes integritas. Karena Dani tidak tes integritas, maka Dani tidak mengikuti wawancara (modus tollens).",
  c: "Penalaran Logis ‚Äì Implikasi"
},

/* =================================================
   üî¢ TIU ‚Äì LOGIKA NUMERIK
   DERET ANGKA
================================================= */

{
  q: "Deret berikut: 3, 6, 12, 24, 48, ‚Ä¶ Angka berikutnya adalah ‚Ä¶",
  o: ["54", "72", "96", "108", "144"],
  a: 2,
  e: "Pola dikali 2 secara konsisten: 48 √ó 2 = 96.",
  c: "Deret Geometris"
},
{
  q: "Deret berikut: 2, 5, 10, 17, 26, ‚Ä¶ Angka berikutnya adalah ‚Ä¶",
  o: ["35", "36", "37", "38", "39"],
  a: 2,
  e: "Pola bertambah +3, +5, +7, +9 ‚Üí berikutnya +11: 26 + 11 = 37.",
  c: "Deret Bertingkat"
},
{
  q: "Deret berikut: 100, 97, 91, 82, 70, ‚Ä¶ Angka berikutnya adalah ‚Ä¶",
  o: ["55", "56", "58", "60", "52"],
  a: 0,
  e: "Pola pengurangan bertahap: ‚àí3, ‚àí6, ‚àí9, ‚àí12 ‚Üí berikutnya ‚àí15: 70 ‚àí 15 = 55.",
  c: "Deret Pola Selisih"
}



  
];

/* ===============================
   üî¢ STATE & GAMIFIKASI
================================ */
let index = 0;
let score = 0;
let answered = false;
let kp = 0;
let level = 1;
let analytics = {};

/* ===============================
   üéÆ GAMIFICATION UI
================================ */
function updateGamification() {
  document.getElementById("kp").innerText = kp;
  document.getElementById("level").innerText = level;
}

/* ===============================
   üîÄ SHUFFLE OPSI JAWABAN
   (AMAN & TANPA RUSAK BANK SOAL)
================================ */
function shuffleQuestion(question) {
  // pasangkan opsi + status benar
  const paired = question.o.map((text, idx) => ({
    text,
    isCorrect: idx === question.a
  }));

  // Fisher‚ÄìYates shuffle
  for (let i = paired.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [paired[i], paired[j]] = [paired[j], paired[i]];
  }

  // update opsi & index jawaban benar
  question.o = paired.map(p => p.text);
  question.a = paired.findIndex(p => p.isCorrect);

  return question;
}

/* ===============================
   üìÑ LOAD SOAL (OPSINYA DIAKAC)
================================ */
let currentQuestion = null;

function loadQuestion() {
  answered = false;

  // clone soal agar bank asli tidak berubah
  currentQuestion = shuffleQuestion(
    JSON.parse(JSON.stringify(questions[index]))
  );

  document.getElementById("progress").innerText =
    `Soal ${index + 1} dari ${questions.length}`;
  document.getElementById("question").innerText = currentQuestion.q;
  document.getElementById("explanation").style.display = "none";

  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  currentQuestion.o.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.innerText = String.fromCharCode(65 + i) + ". " + opt;
    btn.onclick = () => selectAnswer(i);
    optionsDiv.appendChild(btn);
  });

  // start timer hanya sekali
  if (index === 0 && !startTime) {
    startTime = new Date();
    startTimer();
  }
}

/* ===============================
   ‚úÖ PILIH JAWABAN
================================ */
function selectAnswer(i) {
  if (answered) return;
  answered = true;

  const q = currentQuestion;
  const buttons = document.querySelectorAll(".options button");

  buttons.forEach((b, idx) => {
    if (idx === q.a) b.classList.add("correct");
    if (idx === i && i !== q.a) b.classList.add("wrong");
    b.disabled = true;
  });

  if (i === q.a) {
    score += 5;
    kp += 10;
    level = Math.floor(kp / 50) + 1;
    updateGamification();
  } else {
    analytics[q.c] = (analytics[q.c] || 0) + 1;
  }

  const exp = document.getElementById("explanation");
  exp.innerText = q.e;
  exp.style.display = "block";
}

/* ===============================
   ‚ñ∂Ô∏è SOAL BERIKUTNYA
================================ */
function nextQuestion() {
  if (index < questions.length - 1) {
    index++;
    loadQuestion();
  } else {
    finishExam();
  }
}


/* ===============================
   üèÅ SELESAI UJIAN
   ANALITIK + GRAFIK + ADAPTIVE TEST
================================ */
function finishExam() {
  clearInterval(timerInterval);

  const endTime = new Date();
  const durationSec = Math.max(1, Math.floor((endTime - startTime) / 1000));
  const avgTime = durationSec / questions.length;

  const correct = score / 5;
  const wrong = questions.length - correct;
  const errorRate = wrong / questions.length;

  document.getElementById("quiz").style.display = "none";
  document.getElementById("result").style.display = "block";

  document.getElementById("finalScore").innerText =
    `${score} / ${questions.length * 5}`;
  document.getElementById("finalKP").innerText = kp;
  document.getElementById("finalLevel").innerText = level;

  /* ===============================
     üìä GRAFIK AREA LEMAH
  ============================== */
  let graphHTML = "";
  if (Object.keys(analytics).length > 0) {
    const max = Math.max(...Object.values(analytics));
    graphHTML += `<h4>üìä Distribusi Kesalahan</h4>`;
    Object.entries(analytics).forEach(([area, count]) => {
      graphHTML += `
        <div style="margin-bottom:8px">
          <div style="font-size:13px">${area}</div>
          <div style="background:#e5e7eb;border-radius:6px">
            <div style="
              width:${(count/max)*100}%;
              background:linear-gradient(135deg,#f59e0b,#ef4444);
              color:white;
              padding:4px 8px;
              font-size:12px
            ">
              ${count} salah
            </div>
          </div>
        </div>
      `;
    });
  }

  /* ===============================
     üß† ADAPTIVE RECOMMENDATION
  ============================== */
  let focusArea = Object.keys(analytics).length
    ? Object.entries(analytics).sort((a,b)=>b[1]-a[1])[0][0]
    : "Penguatan umum";

  let adaptiveHTML = `<h4>üß† Rekomendasi Latihan Berikutnya</h4><ul>`;

  if (avgTime > 75 && errorRate > 0.3) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Ragu-ragu</li>
      <li><strong>Fokus:</strong> ${focusArea}</li>
      <li><strong>Mode:</strong> Speed Drill (10 soal)</li>
      <li><strong>Target:</strong> ‚â§ 60 detik/soal</li>
    `;
  } else if (avgTime < 45 && errorRate > 0.4) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Cepat tapi ceroboh</li>
      <li><strong>Fokus:</strong> Analisis konteks</li>
      <li><strong>Mode:</strong> HOTS Naratif</li>
      <li><strong>Target:</strong> 80‚Äì90 detik/soal</li>
    `;
  } else if (avgTime > 75 && errorRate <= 0.2) {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Akurat tapi lambat</li>
      <li><strong>Fokus:</strong> Efisiensi keputusan</li>
      <li><strong>Mode:</strong> Time-bound Practice</li>
      <li><strong>Target:</strong> 55‚Äì60 detik/soal</li>
    `;
  } else {
    adaptiveHTML += `
      <li><strong>Profil:</strong> Stabil</li>
      <li><strong>Fokus:</strong> Konsistensi</li>
      <li><strong>Mode:</strong> Mini Tryout Adaptif</li>
      <li><strong>Target:</strong> 60‚Äì70 detik/soal</li>
    `;
  }

  adaptiveHTML += `</ul>`;

  document.getElementById("scoreText").innerHTML = `
    ${graphHTML}
    <div style="margin-top:16px">
      ‚è±Ô∏è <strong>Waktu:</strong> ${Math.floor(durationSec/60)} menit ${durationSec%60} detik<br>
      ‚è≥ <strong>Rata-rata:</strong> ${Math.round(avgTime)} detik/soal
    </div>
    <div style="margin-top:16px">${adaptiveHTML}</div>
  `;

  /* ===============================
     üíæ SIMPAN RIWAYAT
  ============================== */
  const history = JSON.parse(localStorage.getItem("twkHistory")) || [];
  history.push({
    date: new Date().toLocaleString(),
    score,
    kp,
    level,
    durationSec,
    avgTime,
    analytics
  });
  localStorage.setItem("twkHistory", JSON.stringify(history));
}

/* ===============================
   üöÄ START
================================ */
loadQuestion();
</script>



</body>
</html>
