<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sample Size Calculator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f2f4f8;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    .card {
      background-color: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
      padding: 30px;
    }
    h1 {
      margin-top: 0;
      font-size: 24px;
      color: #333;
      text-align: center;
    }
    h1 span {
      font-size: 14px;
      color: #777;
      display: block;
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: 600;
      color: #333;
    }
    input, select {
      width: 100%;
      padding: 10px 12px;
      margin-top: 5px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    input:focus, select:focus {
      border-color: #5ab0f7;
      outline: none;
    }
    .tooltip {
      font-size: 13px;
      color: #777;
      margin-top: 4px;
    }
    button {
      margin-top: 20px;
      padding: 12px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #0056b3;
    }
    .result, .history {
      background-color: #f9f9f9;
      padding: 15px 20px;
      margin-top: 30px;
      border-radius: 10px;
      border-left: 4px solid #007bff;
    }
    .result strong {
      color: #333;
    }
    ul {
      padding-left: 20px;
      margin: 10px 0;
    }
    h2 {
      font-size: 18px;
      margin-top: 40px;
      color: #444;
    }
    #downloadButtons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 20px;
    }
    .case-study {
      background-color: #f0f8ff;
      border-left: 4px solid #00aaff;
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 30px;
    }
    .case-study h2 {
      margin-top: 0;
      font-size: 18px;
      color: #0077cc;
    }
    .case-study p {
      margin: 10px 0 0;
      font-size: 15px;
      color: #333;
    }
    footer {
      text-align: center;
      font-size: 14px;
      margin-top: 40px;
      color: #555;
    }
    @media (max-width: 600px) {
      .card {
        padding: 20px;
      }
    }
    @media print {
      button, .tooltip, #downloadButtons {
        display: none !important;
      }
      footer {
        display: block !important;
      }
    }
    
    .popup-overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.popup-box {
  background: white;
  padding: 2rem;
  border-radius: 14px;
  max-width: 400px;
  width: 90%;
  box-shadow: 0 12px 35px rgba(0, 0, 0, 0.3);
  text-align: center;
}

.popup-box h2 {
  margin-top: 0;
  color: #333;
}

.popup-box p {
  font-size: 15px;
  color: #555;
  line-height: 1.6;
  margin-top: 10px;
  margin-bottom: 20px;
}

.popup-box input {
  box-sizing: border-box;
  padding: 0.75rem 1rem;
  width: 100%;
  max-width: 100%;
  border: 1.5px solid #ccc;
  border-radius: 8px;
  margin: 1.2rem 0;
  font-size: 1rem;
  outline: none;
}

.popup-box button {
  margin: 0.5rem;
  padding: 0.8rem 1.6rem;
  font-size: 1rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

.btn-akses {
  background-color: #f97316;
  color: white;
}

.btn-akses:hover {
  background-color: #c2410c;
}

.btn-premium {
  background-color: #4caf50;
  color: white;
}

.btn-premium:hover {
  background-color: #388e3c;
}

  </style>
</head>
<body>
  <div class="container">
    <div class="card" id="outputArea">
      <h1>Perhitungan Besar Sampel untuk Uji Paired T-Test</h1>

      <div class="case-study">
        <h2>üß™ Contoh Studi Kasus</h2>
        <p>
          Seorang peneliti ingin mengetahui apakah program pelatihan meningkatkan nilai ujian pegawai.
          Nilai rata-rata sebelum pelatihan adalah 70, dan setelah pelatihan meningkat menjadi 75.
          Dari sampel awal, varians perbedaan nilai diketahui sebesar 25.
          Peneliti ingin mengetahui berapa besar sampel minimal yang dibutuhkan untuk mendeteksi perbedaan rata-rata sebesar 5 poin dengan tingkat kepercayaan 95% dan power 80%.
        </p>
      </div>

      <form id="pairedTForm">
        <label for="variance">Varians Perbedaan (œÉ¬≤):</label>
        <input type="number" id="variance" step="any" required />
        <div class="tooltip">Contoh: 25 ‚Äî varians dari selisih nilai antara dua waktu atau kondisi</div>

        <label for="delta">Perbedaan yang Diinginkan (Œî):</label>
        <input type="number" id="delta" step="any" required />
        <div class="tooltip">Contoh: 5 ‚Äî selisih rata-rata yang ingin dideteksi, misalnya skor meningkat dari 70 ke 75</div>

        <label for="confidence">Confidence Level (Z<sub>Œ±/2</sub>):</label>
        <select id="confidence" required>
          <option disabled selected value="">-- Pilih Confidence Level --</option>
          <option value="1.645">90% (Z = 1.645)</option>
          <option value="1.96">95% (Z = 1.96)</option>
          <option value="2.576">99% (Z = 2.576)</option>
        </select>
        <div class="tooltip">Tingkat keyakinan terhadap hasil (CI), misalnya 95% ‚Üí Z = 1.96</div>

        <label for="power">Power (Z<sub>Œ≤</sub>):</label>
        <select id="power" required>
          <option disabled selected value="">-- Pilih Power --</option>
          <option value="0.84">80% (Z = 0.84)</option>
          <option value="1.28">90% (Z = 1.28)</option>
        </select>
        <div class="tooltip">Kemampuan uji mendeteksi efek jika ada (power), misalnya 80% ‚Üí Z = 0.84</div>

        <button type="submit">üîç Hitung Sampel</button>
      </form>

      <div id="result" class="result" style="display:none;"></div>

      <div class="history">
        <h2>üìä Riwayat Perhitungan</h2>
        <ul id="history"></ul>
      </div>
    </div>

    <div id="downloadButtons">
      <button id="downloadPNG">üñºÔ∏è Download PNG</button>
    </div>
  </div>

<!-- POPUP MODAL -->
<div class="popup-overlay" id="popup-access">
  <div class="popup-box">
    <h2>Akses Premium</h2>
    <p>
      Ingin membuka seluruh fitur ini? Yuk mulai berlangganan sekarang.<br>
      Jika Anda sudah memiliki kode akses, masukkan di bawah ini:
    </p>
    <input type="text" id="access-code" placeholder="Masukkan Kode Akses" />
    <div>
      <button class="btn-akses" onclick="checkAccess()">Gunakan Kode</button>
      <button class="btn-premium" onclick="window.location.href='https://lynk.id/primajanaedu/2q46wjnpngky/checkout'">Berlangganan Sekarang</button>
    </div>
  </div>
</div>

  <footer>
    &copy; 2025 PT Primajana Bagia Mesari
  </footer>

  <script>
    const form = document.getElementById("pairedTForm");
    const resultDiv = document.getElementById("result");
    const historyList = document.getElementById("history");
    const pngBtn = document.getElementById("downloadPNG");
    const outputArea = document.getElementById("outputArea");

    let history = [];

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const variance = parseFloat(document.getElementById("variance").value);
      const delta = parseFloat(document.getElementById("delta").value);
      const confidenceZ = parseFloat(document.getElementById("confidence").value);
      const powerZ = parseFloat(document.getElementById("power").value);

      if (isNaN(variance) || variance <= 0) {
        alert("Varians perbedaan (œÉ¬≤) harus nilai positif.");
        return;
      }

      if (isNaN(delta) || delta <= 0) {
        alert("Perbedaan yang diinginkan (Œî) harus nilai positif.");
        return;
      }

      if (isNaN(confidenceZ) || isNaN(powerZ)) {
        alert("Pilih tingkat confidence dan power yang valid.");
        return;
      }

      const n = Math.ceil(
        (2 * Math.pow(confidenceZ + powerZ, 2) * variance) / Math.pow(delta, 2)
      );

      const explanation = `
        <strong>Hasil Perhitungan:</strong><br/>
        n = 2 √ó (Z<sub>Œ±/2</sub> + Z<sub>Œ≤</sub>)¬≤ √ó œÉ¬≤ / Œî¬≤<br/>
        n = 2 √ó (${confidenceZ} + ${powerZ})¬≤ √ó ${variance} / ${delta}¬≤<br/>
        <strong>n = ${n}</strong><br/><br/>

        <strong>Interpretasi:</strong><br/>
        Minimal ${n} sampel diperlukan untuk mendeteksi perbedaan sebesar Œî dengan varians œÉ¬≤.<br/>
        Disarankan menambahkan 10%: <strong>${Math.ceil(n * 1.1)} sampel</strong>.
      `;

      resultDiv.innerHTML = explanation;
      resultDiv.style.display = "block";

      const historyItem = `œÉ¬≤=${variance}, Œî=${delta} ‚Üí n=${n} (rekomendasi: ${Math.ceil(n * 1.1)})`;
      history.unshift(historyItem);
      updateHistory();
    });

    function updateHistory() {
      historyList.innerHTML = "";
      history.slice(0, 5).forEach(item => {
        const li = document.createElement("li");
        li.textContent = item;
        historyList.appendChild(li);
      });
    }

    pngBtn.addEventListener("click", () => {
      html2canvas(document.body).then(canvas => {
        const link = document.createElement("a");
        link.download = "hasil-perhitungan-paired-t-test.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    });
  </script>
  
  <script>
  window.addEventListener('load', () => {
    const alreadyAccessed = sessionStorage.getItem("hasAccess");
    if (!alreadyAccessed) {
      setTimeout(() => {
        document.getElementById('popup-access').style.display = 'flex';
      }, 20000); // 20 detik setelah halaman dimuat
    }
  });

  function checkAccess() {
    const code = document.getElementById('access-code').value.trim();
    const validCode = "8188"; // Ganti sesuai kebutuhan
    if (code === validCode) {
      sessionStorage.setItem("hasAccess", "true");
      document.getElementById('popup-access').style.display = 'none';
    } else {
      alert("Kode akses salah. Silakan coba lagi.");
    }
  }
</script>

</body>
</html>
